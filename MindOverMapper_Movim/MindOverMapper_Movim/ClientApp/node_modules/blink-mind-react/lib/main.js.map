{"version":3,"sources":["webpack://blink-mind-react/webpack/universalModuleDefinition","webpack://blink-mind-react/webpack/bootstrap","webpack://blink-mind-react/external \"react\"","webpack://blink-mind-react/external \"styled-components\"","webpack://blink-mind-react/external \"debug\"","webpack://blink-mind-react/./src/types/Node.ts","webpack://blink-mind-react/./src/component/common/BaseWidget.tsx","webpack://blink-mind-react/./src/model/MindMapModelModifier.ts","webpack://blink-mind-react/./src/config/DiagramConfig.tsx","webpack://blink-mind-react/external \"immutable\"","webpack://blink-mind-react/external \"classnames\"","webpack://blink-mind-react/./src/model/MindNodeModel.ts","webpack://blink-mind-react/external \"awehook-rich-markdown-editor\"","webpack://blink-mind-react/./src/model/encoding/MarkdownSerializer.ts","webpack://blink-mind-react/./src/util/index.ts","webpack://blink-mind-react/external \"lodash\"","webpack://blink-mind-react/./src/component/TopicContentWidget.tsx","webpack://blink-mind-react/./src/component/utils/index.tsx","webpack://blink-mind-react/./src/model/DiagramState.ts","webpack://blink-mind-react/./src/model/MindMapModel.ts","webpack://blink-mind-react/./src/main.ts","webpack://blink-mind-react/./src/component/DiagramWidget.tsx","webpack://blink-mind-react/./src/component/MindDragScrollWidget.tsx","webpack://blink-mind-react/./src/component/common/DragScrollWidget.tsx","webpack://blink-mind-react/external \"resize-observer-polyfill\"","webpack://blink-mind-react/./src/component/NodeLayerWidget.tsx","webpack://blink-mind-react/./src/component/RootNodeWidget.tsx","webpack://blink-mind-react/./src/config/DefaultNodeContentEditor.tsx","webpack://blink-mind-react/external \"slate-md-serializer\"","webpack://blink-mind-react/./src/model/NodeRelationship.ts","webpack://blink-mind-react/external \"slate\"","webpack://blink-mind-react/./src/config/DefaultNodeDescEditor.tsx","webpack://blink-mind-react/./src/config/DefaultFocusItemBorderSvg.tsx","webpack://blink-mind-react/./src/config/ThemeConfigs.ts","webpack://blink-mind-react/./src/component/NodePopupMenu.tsx","webpack://blink-mind-react/./src/component/NodePopupMenuItem.tsx","webpack://blink-mind-react/./src/component/LinkWidget.tsx","webpack://blink-mind-react/./src/component/NodeWidget.tsx","webpack://blink-mind-react/./src/component/Modals.tsx","webpack://blink-mind-react/./src/component/common/BaseModal.tsx","webpack://blink-mind-react/external \"react-modal\"","webpack://blink-mind-react/external \"styled-components-breakpoint\"","webpack://blink-mind-react/./src/component/common/Flex.tsx","webpack://blink-mind-react/./src/component/common/SaveRef.tsx","webpack://blink-mind-react/./src/component/Theme.tsx","webpack://blink-mind-react/./src/component/DiagramWidget.css?fd24","webpack://blink-mind-react/./src/component/DiagramWidget.css","webpack://blink-mind-react/./node_modules/css-loader/lib/css-base.js","webpack://blink-mind-react/./node_modules/style-loader/lib/addStyles.js","webpack://blink-mind-react/./node_modules/style-loader/lib/urls.js","webpack://blink-mind-react/./src/model/MindDiagramModel.ts","webpack://blink-mind-react/./src/model/encoding/DataEncoding.ts"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","FocusItemMode","Normal","PopupMenu","EditingContent","EditingDesc","NodeWidgetDirection","LEFT","RIGHT","ROOT","NodeStyle","PRIMARY_HAS_BORDER_NORMAL_NO_BORDER","ALL_HAS_BORDER","BaseWidget","_super","props","this","__extends","Component","OpType","MindNodeModel_1","Node_1","util_1","immutable_1","NodeRelationship_1","slate_1","log","default","TOGGLE_COLLAPSE","SET_ITEM_CONTENT","SET_ITEM_DESC","FOCUS_ITEM","START_EDITING_DESC","START_EDITING_CONTENT","END_EDITING","SET_POPUP_MENU_ITEM_KEY","ADD_CHILD","ADD_SIBLING","DELETE_NODE","SET_DROP_AREA_KEY","DRAG_AND_DROP","allowUndoOps","MindMapModelModifier","op","model","opType","itemKey","arg","opMap","has","needPushUndo","includes","item","getItem","getContent","Value","document","toggleCollapse","getSubItemKeys","size","merge","collapse","getCollapse","setItem","update","itemMap","set","getKey","focusItem","getFocusItemKey","setFocusItemMode","getFocusItemMode","setFocusItemKey","setPopupMenuItemKey","getPopupMenuItemKey","setItemContent","content","setItemDesc","desc","setDropAreaKey","getDropAreaKey","startEditingContent","getEditingContentItemKey","startEditingDesc","getDesc","getEditingDescItemKey","endEditing","addChild","child_1","MindNodeModel","uuidv4","subItemKeys","push","addSibling","getRootItemKey","sibling_1","getParentKey","pItem_1","getParentItem","insert","indexOf","deleteNode","pItem","idx","delete","deleteKeys","getAllSubItemKeys","withMutations","map","_i","deleteKeys_1","length","dkey","res","toArray","subItemKeys_1","subKey","getRelation","srcKey","dstKey","srcItem","dstItem","NodeRelationship","Sibling","Descendant","Ancestor","None","canDragAndDrop","dir","getEditorRootItemKey","dragAndDrop","srcParentKey","srcParentSubItemKeys","srcIndex","dstSubItemKeys_1","setIn","dstParentKey_1","dstParentSubItemKeys_1","dstIndex","newDstParentSubItems_1","List","forEach","Map","DiagramLayoutDirection","React","DefaultNodeContentEditor_1","DefaultNodeDescEditor_1","DefaultFocusItemBorderSvg_1","ThemeConfigs_1","LEFT_TO_RIGHT","RIGHT_TO_LEFT","LEFT_AND_RIGHT","defaultDiagramConfig","direction","nodeStyle","hMargin","vMargin","focusBorderPadding","theme","themeConfigs","rootItemStyle","fontSize","borderRadius","padding","primaryItemStyle","normalItemStyle","editorRendererFn","diagramState","nodeKey","saveRef","createElement","DefaultNodeContentEditor","descEditorRenderFn","DefaultNodeDescEditor","focusItemsBorderRenderFn","getRef","DefaultFocusItemBorderSvg","ref","MarkdownSerializer_1","defaultMindNodeRecord","parentKey","contentToString","serialize","descToString","toString","toJSON","createWith","obj","node","Record","slate_md_serializer_1","replace","Math","random","isRectEqual","r1","r2","left","top","width","height","BaseWidget_1","MindMapModelModifier_1","NodePopupMenu_1","styled_components_1","debug_1","logr","TopicContent","div","withConfig","displayName","componentId","templateObject_1","__makeTemplateObject","dragEnter","color","primary","isRoot","DescIcon","templateObject_2","DropArea","templateObject_3","dragSrcItemKey","TopicContentWidget","_this","onDragStart","e","stopPropagation","onDragOver","preventDefault","onDragEnter","_a","tag","nativeEvent","target","dataset","getModel","setState","onDragLeave","relatedTarget","contains","onDrop","clearDropArea","onClick","isDoubleClick","setTimeout","showPopMenu","onDoubleClick","handlePopMenuVisibleChange","visible","_handleClick","contentRect","getBoundingClientRect","clientX","right","clientY","bottom","state","componentDidUpdate","prevProps","prevState","snapshot","addEventListener","removeEventListener","shouldComponentUpdate","nextProps","nextState","nextContext","ds","nextDS","nextNodeKey","nextDir","mm","nextMm","focusKey","nextFocusKey","focusMode","render","draggable","itemStyle","mindMapModel","config","getConfig","getItemVisualLevel","descString","showDescIcon","data-tag","style","className","NodePopupMenu","handleVisibleChange","LinkWidget_1","NodeWidget_1","createSubNodesAndSubLinks","items","dropArea","setViewBoxScroll","setViewBoxScrollDelta","dropAreaKey","split","subItems","subLinks","subLinksKeys","NodeWidget","linkKey","LinkWidget","fromNodeKey","toNodeKey","dropDir","DiagramConfig_1","defaultRecord","allowUndo","undoStack","Stack","redoStack","DiagramStateRecord","DiagramState","immutable","_immutable","getImmutable","getThemeConfig","getAllowUndo","getUndoStack","getRedoStack","undo","newModel","peek","shift","redo","newInnerState","innerState","setModel","setConfig","assign","defaultMindMapRecord","rootItemKey","editorRootItemKey","focusItemKey","focusItemMode","MindMapModel","getRootItem","getEditorRootItem","getItemMap","level","itemObj","__export","cx","MindDragScrollWidget_1","Modals_1","SaveRef_1","DiagramState_1","Theme_1","Diagram","DiagramWidget","args","arguments","newState","onChange","Array","isArray","arr","operation","MindDragScrollWidget","Modals","DragScrollWidget_1","NodeLayerWidget_1","canDragFunc","selection","getSelection","anchorNode","nodeType","Node","TEXT_NODE","componentDidMount","rootTopic","nodeLayer","rootTopicRect","nodeLayerRect","dragScrollWidget","viewBox","DragScrollWidget","__assign","NodeLayerWidget","resize_observer_polyfill_1","DragScrollView","DragScrollContent","contentResizeCallback","entries","observer","oldContentRect","widgetStyle","clientWidth","clientHeight","bigView","contentResizeObserver","contentRef","observe","viewBoxRef","bigViewRef","setWidgetStyle","scrollLeft","scrollTop","deltaLeft","deltaTop","onMouseDown","mouseKey","needKeyPressed","button","ctrlKey","_lastCoordX","_lastCoordY","onMouseMove","onMouseUp","handleContextMenu","componentWillUnmount","contentStyle","children","defaultProps","RootNodeWidget_1","NodeLayer","renderItems","RootNodeWidget","TopicContentWidget_1","utils_1","NodeLayerPart","Topic","needRelocation","layoutSubLinks","linkWidget","layout","getNodeModel","getPartItems","subItemCount","slice","ceil","newRect","collapseIcon","oldCollapseIconRect","renderPartItems","apply","cxName","_b","leftItems","rightItems","Fragment","awehook_rich_markdown_editor_1","lodash_1","NodeContent","readOnly","editingKey","nextEditingKey","editingItemKey","editorValue","debounce","DescEditor","PureComponent","renderFocusItemBorder","reLayout","forceUpdate","focusTopic","focusTopicRect","xmlns","version","strokeWidth","stroke","fill","x","y","rx","ry","theme1","fontColor","theme2","NodePopupMenuItem_1","event","wasOutside","rootRef","editorRootKey","menuItems","rootCanUse","NodePopupMenuItem","label","icon","MenuItem","logd","Link","generatePath","generatePathStringRoot","generatePathStringForBorderNode","fromItemChildrenCount","fromTopic","toElementTopic","fromX","fromY","toX","toY","fromChildrenRect","toElementTopicRect","fromTopicRect","fakeDelta","generatePathStringWithParameter","partLayerRect","dropFakeDir","fakeRectWidth","curve","centerX","centerY","generateFakeRectPathString","layoutRoot","layoutNormal","partLayerElement","fromNodeChildren","prevPartLayerRect","prevFromChildrenRect","toTopicRect","prevFromTopicRect","prevToTopicRect","strokeColor","strokeDasharray","NodeChildren","NodeTopic","CollapseLine","templateObject_4","hide","Icon","templateObject_5","onClickCollapse","collapseIconRef","renderSubItems","diagramConfig","inlineStyle","paddingRight","paddingLeft","iconfont","BaseModal_1","DescWrapper","EditDescModal","handleClose","getActiveModalName","activeModalName","rest","__rest","BaseModal","isOpen","onRequestClose","cloneElement","title","ReactModal","styled_components_breakpoint_1","Flex_1","setAppElement","StyledModal","Content","Flex","ModalTitle","Close","span","contentLabel","column","restProps","Container","auto","align","justify","shrink","SaveRef","fireListener","observers","listeners_1","registerRefListener","listener","ThemeProvider","options","hmr","transform","insertInto","locals","useSourceMap","list","sourceMap","cssMapping","btoa","sourceMapping","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","source","sourceRoot","concat","join","mediaQuery","alreadyImportedModules","id","fn","memo","stylesInDom","isOldIE","all","atob","getElement","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","domStyle","refs","j","parts","addStyle","listToStyles","newStyles","base","part","css","media","insertStyleElement","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","before","removeStyleElement","parentNode","removeChild","splice","createStyleElement","attrs","type","addAttrs","el","keys","setAttribute","remove","result","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","href","styleSheet","cssText","createTextNode","newObj","DEBUG","newList","mayRemove","textStore","replaceText","index","replacement","filter","Boolean","cssNode","childNodes","location","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","newUrl","unquotedOrigUrl","trim","$1","test","MindDiagramModel","zoom","MindMapModel_1","convertMindMapModelToRaw","convertRawToMindMapModel"],"mappings":"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","file":"main.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"blink-mind-react\"] = factory();\n\telse\n\t\troot[\"blink-mind-react\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 18);\n","module.exports = require(\"react\");","module.exports = require(\"styled-components\");","module.exports = require(\"debug\");","export type NodeKeyType = string;\n\n//节点 Drag and drop 时 Drop 区域的位置\nexport type DropDirType = 'in' | 'before' | 'after';\n\nexport enum FocusItemMode {\n  Normal,\n  PopupMenu,\n  EditingContent,\n  EditingDesc\n}\n\nexport enum NodeWidgetDirection {\n  LEFT, // 从右向左\n  RIGHT, // 从左向右\n  ROOT // root\n}\n\nexport enum NodeStyle {\n  PRIMARY_HAS_BORDER_NORMAL_NO_BORDER,\n  ALL_HAS_BORDER\n}\n\nexport interface INodeRecordType {\n  key: NodeKeyType;\n}\n\nexport interface INodeModel {\n  getKey(): NodeKeyType;\n}\n","import * as React from 'react';\n\nexport interface BaseWidgetProps {}\n\nexport class BaseWidget<\n  P extends BaseWidgetProps = BaseWidgetProps,\n  S = any\n> extends React.Component<P, S> {\n  constructor(props: P) {\n    super(props);\n  }\n}\n","import { MindNodeModel } from './MindNodeModel';\nimport { MindMapModel } from './MindMapModel';\nimport { DropDirType, FocusItemMode, NodeKeyType } from '../types/Node';\nimport { uuidv4 } from '../util';\nimport { List } from 'immutable';\nimport { NodeRelationship } from './NodeRelationship';\nimport { Value } from 'slate';\nimport debug from 'debug';\n\nconst log = debug('model:modifier');\nexport enum OpType {\n  TOGGLE_COLLAPSE,\n  SET_ITEM_CONTENT,\n  SET_ITEM_DESC,\n  FOCUS_ITEM,\n  START_EDITING_DESC,\n  START_EDITING_CONTENT,\n  END_EDITING,\n  SET_POPUP_MENU_ITEM_KEY,\n  ADD_CHILD,\n  ADD_SIBLING,\n  DELETE_NODE,\n  SET_DROP_AREA_KEY,\n  DRAG_AND_DROP\n}\n\nconst allowUndoOps: Array<OpType> = [\n  // OpType.SET_ITEM_CONTENT,\n  // OpType.SET_ITEM_DESC,\n  OpType.TOGGLE_COLLAPSE,\n  OpType.ADD_CHILD,\n  OpType.ADD_SIBLING,\n  OpType.DELETE_NODE,\n  OpType.DRAG_AND_DROP\n];\n\nfunction allowUndo(\n  model: MindMapModel,\n  opType: OpType,\n  itemKey: NodeKeyType,\n  arg: any\n): boolean {\n  //@ts-ignore\n  if (!allowUndoOps.includes(opType)) return false;\n  if (opType === OpType.SET_ITEM_CONTENT || opType === OpType.SET_ITEM_DESC) {\n    const item = model.getItem(itemKey);\n    if (item.getContent() instanceof Value) {\n      const oldContent = item.getContent() as Value;\n      return oldContent.document !== arg.document;\n    }\n  }\n  return true;\n}\n\ntype OpFunctionType = (\n  model: MindMapModel,\n  itemKey: NodeKeyType,\n  arg?\n) => MindMapModel;\n\nexport class MindMapModelModifier {\n  static opMap = new Map<OpType, OpFunctionType>([\n    [OpType.TOGGLE_COLLAPSE, MindMapModelModifier.toggleCollapse],\n    [OpType.SET_ITEM_CONTENT, MindMapModelModifier.setItemContent],\n    [OpType.SET_ITEM_DESC, MindMapModelModifier.setItemDesc],\n    [OpType.FOCUS_ITEM, MindMapModelModifier.focusItem],\n    [OpType.START_EDITING_CONTENT, MindMapModelModifier.startEditingContent],\n    [OpType.START_EDITING_DESC, MindMapModelModifier.startEditingDesc],\n    [OpType.END_EDITING, MindMapModelModifier.endEditing],\n    [OpType.SET_POPUP_MENU_ITEM_KEY, MindMapModelModifier.setPopupMenuItemKey],\n    [OpType.ADD_CHILD, MindMapModelModifier.addChild],\n    [OpType.ADD_SIBLING, MindMapModelModifier.addSibling],\n    [OpType.DELETE_NODE, MindMapModelModifier.deleteNode],\n    [OpType.SET_DROP_AREA_KEY, MindMapModelModifier.setDropAreaKey],\n    [OpType.DRAG_AND_DROP, MindMapModelModifier.dragAndDrop]\n  ]);\n\n  static op(\n    model: MindMapModel,\n    opType: OpType,\n    itemKey: NodeKeyType,\n    arg\n  ): { model: MindMapModel; needPushUndo: boolean } {\n    if (opType === OpType.DELETE_NODE) log(opType);\n    if (MindMapModelModifier.opMap.has(opType)) {\n      const opFunc = MindMapModelModifier.opMap.get(opType);\n      return {\n        model: opFunc(model, itemKey, arg),\n        needPushUndo: allowUndo(model, opType, itemKey, arg)\n      };\n    }\n    return { model, needPushUndo: false };\n  }\n\n  static toggleCollapse(\n    model: MindMapModel,\n    itemKey: NodeKeyType\n  ): MindMapModel {\n    let item = model.getItem(itemKey);\n    if (item.getSubItemKeys().size !== 0) {\n      item = item.merge({\n        collapse: !item.getCollapse()\n      });\n      model = MindMapModelModifier.setItem(model, item);\n    }\n    return model;\n  }\n\n  static setItem(model: MindMapModel, item: MindNodeModel): MindMapModel {\n    return model.update('itemMap', itemMap => itemMap.set(item.getKey(), item));\n  }\n\n  static focusItem(model: MindMapModel, itemKey: NodeKeyType) {\n    // log(`set focus item key ${itemKey}`);\n    if (itemKey !== model.getFocusItemKey()) {\n      model = model.set('focusItemKey', itemKey);\n    }\n    if (itemKey === null) {\n      model = model.set('focusItemMode', FocusItemMode.Normal);\n    }\n    return model;\n  }\n\n  static setFocusItemMode(model: MindMapModel, mode: FocusItemMode) {\n    if (mode !== model.getFocusItemMode())\n      model = model.set('focusItemMode', mode);\n    return model;\n  }\n\n  static setFocusItemKey(model: MindMapModel, key: NodeKeyType) {\n    if (key !== model.getFocusItemKey()) model = model.set('focusItemKey', key);\n    return model;\n  }\n\n  static setPopupMenuItemKey(model: MindMapModel, itemKey: NodeKeyType) {\n    log('set popup menu item key ', itemKey);\n    if (itemKey !== model.getPopupMenuItemKey()) {\n      if (itemKey !== model.getFocusItemKey())\n        model = model.set('focusItemKey', itemKey);\n      if (model.get('focusItemMode') !== FocusItemMode.PopupMenu)\n        model = model.set('focusItemMode', FocusItemMode.PopupMenu);\n    }\n    return model;\n  }\n\n  static setItemContent(\n    model: MindMapModel,\n    itemKey: NodeKeyType,\n    content: any\n  ): MindMapModel {\n    let item = model.getItem(itemKey);\n    if (item) {\n      item = item.merge({ content: content });\n      model = MindMapModelModifier.setItem(model, item);\n    }\n    model = model.set('focusItemKey', itemKey);\n    // if (needPush) MindMapModelModifier.pushUndoStack(model);\n    return model;\n  }\n\n  static setItemDesc(\n    model: MindMapModel,\n    itemKey: NodeKeyType,\n    desc: any\n  ): MindMapModel {\n    let item = model.getItem(itemKey);\n    if (item) {\n      item = item.merge({ desc });\n      model = MindMapModelModifier.setItem(model, item);\n    }\n    model = model\n      .set('focusItemKey', itemKey)\n      .set('focusItemMode', FocusItemMode.EditingDesc);\n    return model;\n  }\n\n  static setDropAreaKey(\n    model: MindMapModel,\n    itemKey: NodeKeyType\n  ): MindMapModel {\n    if (itemKey !== model.getDropAreaKey()) {\n      model = model.set('dropAreaKey', itemKey);\n    }\n    log('setDropAreaKey:', model.getDropAreaKey());\n    return model;\n  }\n\n  static startEditingContent(model: MindMapModel, itemKey: NodeKeyType) {\n    log('set editing item key ', itemKey);\n    if (itemKey !== model.getEditingContentItemKey()) {\n      model = MindMapModelModifier.setFocusItemKey(model, itemKey);\n      model = MindMapModelModifier.setFocusItemMode(\n        model,\n        FocusItemMode.EditingContent\n      );\n    }\n    return model;\n  }\n\n  static startEditingDesc(\n    model: MindMapModel,\n    itemKey: NodeKeyType\n  ): MindMapModel {\n    const item = model.getItem(itemKey);\n    if (item) {\n      const desc = item.getDesc();\n      if (desc === null || desc === undefined) {\n        model = MindMapModelModifier.setItemDesc(model, itemKey, '');\n      }\n    }\n    if (itemKey !== model.getEditingDescItemKey()) {\n      model = MindMapModelModifier.setFocusItemKey(model, itemKey);\n      model = MindMapModelModifier.setFocusItemMode(\n        model,\n        FocusItemMode.EditingDesc\n      );\n    }\n    return model;\n  }\n\n  static endEditing(model: MindMapModel, itemKey: NodeKeyType): MindMapModel {\n    model = MindMapModelModifier.setFocusItemMode(model, FocusItemMode.Normal);\n    return model;\n  }\n\n  static addChild(model: MindMapModel, itemKey: NodeKeyType) {\n    let item = model.getItem(itemKey);\n    if (item) {\n      let child = MindNodeModel.create(uuidv4());\n      child = child.set('parentKey', item.getKey());\n      item = item\n        .set('collapse', false)\n        .update('subItemKeys', subItemKeys => subItemKeys.push(child.getKey()));\n      model = model.update('itemMap', itemMap =>\n        itemMap.set(item.getKey(), item).set(child.getKey(), child)\n      );\n      model = MindMapModelModifier.startEditingContent(model, child.getKey());\n    }\n    return model;\n  }\n\n  static addSibling(model: MindMapModel, itemKey: NodeKeyType) {\n    const item = model.getItem(itemKey);\n    if (itemKey === model.getRootItemKey()) return model;\n    if (item) {\n      let sibling = MindNodeModel.create(uuidv4());\n      sibling = sibling.set('parentKey', item.getParentKey());\n      let pItem = model.getParentItem(itemKey);\n      pItem = pItem.update('subItemKeys', subItemKeys =>\n        subItemKeys.insert(subItemKeys.indexOf(itemKey) + 1, sibling.getKey())\n      );\n      model = model.update('itemMap', itemMap =>\n        itemMap.set(pItem.getKey(), pItem).set(sibling.getKey(), sibling)\n      );\n      model = MindMapModelModifier.startEditingContent(model, sibling.getKey());\n    }\n    return model;\n  }\n  static deleteNode(model: MindMapModel, itemKey: NodeKeyType) {\n    log('deleteItem ', itemKey);\n    if (itemKey === model.getRootItemKey()) {\n      return model;\n    }\n    const item = model.getItem(itemKey);\n    let pItem = model.getItem(item.getParentKey());\n\n    const idx = pItem.getSubItemKeys().indexOf(itemKey);\n    pItem = pItem.update('subItemKeys', subItemKeys => subItemKeys.delete(idx));\n\n    model = model\n      .set('focusItemKey', item.getParentKey())\n      .update('itemMap', itemMap => {\n        const deleteKeys = MindMapModelModifier.getAllSubItemKeys(\n          model,\n          itemKey\n        );\n        itemMap = itemMap.set(pItem.key, pItem);\n        itemMap = itemMap.withMutations(map => {\n          map = map.delete(itemKey);\n          for (const dkey of deleteKeys) {\n            map = map.delete(dkey);\n          }\n          return map;\n        });\n        return itemMap;\n      });\n    return model;\n  }\n\n  static getAllSubItemKeys(model: MindMapModel, itemKey: NodeKeyType) {\n    const item = model.getItem(itemKey);\n\n    const res = [];\n    if (item.getSubItemKeys().size > 0) {\n      const subItemKeys = item.getSubItemKeys().toArray();\n      res.push(subItemKeys);\n      for (const subKey of subItemKeys) {\n        res.push(MindMapModelModifier.getAllSubItemKeys(model, subKey));\n      }\n    }\n    return res;\n  }\n\n  // 是否在一个分支上\n  static getRelation(\n    model: MindMapModel,\n    srcKey: NodeKeyType,\n    dstKey: NodeKeyType\n  ): NodeRelationship {\n    const srcItem = model.getItem(srcKey);\n    const dstItem = model.getItem(dstKey);\n    if (srcItem && dstItem) {\n      if (srcItem.getParentKey() == dstItem.getParentKey())\n        return NodeRelationship.Sibling;\n      let pItem = srcItem;\n      while (pItem.getParentKey()) {\n        if (pItem.getParentKey() === dstItem.getKey())\n          return NodeRelationship.Descendant;\n        pItem = model.getParentItem(pItem.getKey());\n      }\n      pItem = dstItem;\n      while (pItem.getParentKey()) {\n        if (pItem.getParentKey() === srcItem.getKey())\n          return NodeRelationship.Ancestor;\n        pItem = model.getParentItem(pItem.getKey());\n      }\n    }\n    return NodeRelationship.None;\n  }\n\n  static canDragAndDrop(\n    model: MindMapModel,\n    srcKey: NodeKeyType,\n    dstKey: NodeKeyType,\n    dir: DropDirType\n  ): boolean {\n    if (\n      srcKey === model.getEditorRootItemKey() ||\n      srcKey === dstKey ||\n      MindMapModelModifier.getRelation(model, srcKey, dstKey) ===\n        NodeRelationship.Ancestor\n    )\n      return false;\n\n    const srcItem = model.getItem(srcKey);\n    if (srcItem.getParentKey() === dstKey && dir === 'in') return false;\n    return true;\n  }\n\n  static dragAndDrop(\n    model: MindMapModel,\n    srcKey: NodeKeyType,\n    arg: {\n      dstKey: NodeKeyType;\n      dir: DropDirType;\n    }\n  ) {\n    const { dstKey, dir } = arg;\n    if (!MindMapModelModifier.canDragAndDrop(model, srcKey, dstKey, dir))\n      return model;\n    const srcItem = model.getItem(srcKey);\n    const dstItem = model.getItem(dstKey);\n\n    const srcParentKey = srcItem.getParentKey();\n    const srcParentItem = model.getItem(srcParentKey);\n    let srcParentSubItemKeys = srcParentItem.getSubItemKeys();\n    const srcIndex = srcParentSubItemKeys.indexOf(srcKey);\n\n    srcParentSubItemKeys = srcParentSubItemKeys.delete(srcIndex);\n\n    if (dir === 'in') {\n      let dstSubItemKeys = dstItem.getSubItemKeys();\n      dstSubItemKeys = dstSubItemKeys.push(srcKey);\n      model = model.withMutations(m => {\n        m.setIn(['itemMap', srcParentKey, 'subItemKeys'], srcParentSubItemKeys)\n          .setIn(['itemMap', srcKey, 'parentKey'], dstKey)\n          .setIn(['itemMap', dstKey, 'subItemKeys'], dstSubItemKeys)\n          .setIn(['itemMap', dstKey, 'collapse'], false)\n          .set('dropAreaKey', null);\n      });\n    } else {\n      const dstParentKey = dstItem.getParentKey();\n      const dstParentItem = model.getItem(dstParentKey);\n      let dstParentSubItemKeys = dstParentItem.getSubItemKeys();\n      const dstIndex = dstParentSubItemKeys.indexOf(dstKey);\n      //src 和 dst 的父亲相同，这种情况要做特殊处理\n      if (srcParentKey === dstParentKey) {\n        let newDstParentSubItems = List();\n        dstParentSubItemKeys.forEach(key => {\n          if (key !== srcKey) {\n            if (key === dstKey) {\n              if (dir === 'before') {\n                newDstParentSubItems = newDstParentSubItems\n                  .push(srcKey)\n                  .push(key);\n              } else {\n                newDstParentSubItems = newDstParentSubItems\n                  .push(key)\n                  .push(srcKey);\n              }\n            } else {\n              newDstParentSubItems = newDstParentSubItems.push(key);\n            }\n          }\n        });\n        model = model.withMutations(m => {\n          m.setIn(\n            ['itemMap', dstParentKey, 'subItemKeys'],\n            newDstParentSubItems\n          ).set('dropAreaKey', null);\n        });\n      } else {\n        if (dir === 'before') {\n          dstParentSubItemKeys = dstParentSubItemKeys.insert(dstIndex, srcKey);\n        } else if (dir === 'after') {\n          dstParentSubItemKeys = dstParentSubItemKeys.insert(\n            dstIndex + 1,\n            srcKey\n          );\n        }\n        model = model.withMutations(m => {\n          m.setIn(\n            ['itemMap', srcParentKey, 'subItemKeys'],\n            srcParentSubItemKeys\n          )\n            .setIn(['itemMap', srcKey, 'parentKey'], dstParentKey)\n            .setIn(\n              ['itemMap', dstParentKey, 'subItemKeys'],\n              dstParentSubItemKeys\n            )\n            .setIn(['itemMap', dstParentKey, 'collapse'], false)\n            .set('dropAreaKey', null);\n        });\n      }\n    }\n    return model;\n  }\n}\n","import * as React from 'react';\nimport { DefaultNodeContentEditor } from './DefaultNodeContentEditor';\nimport { DefaultNodeDescEditor } from './DefaultNodeDescEditor';\nimport { DefaultFocusItemBorderSvg } from './DefaultFocusItemBorderSvg';\nimport { NodeStyle } from '../types/Node';\nimport themeConfigs from './ThemeConfigs';\n\nexport enum DiagramLayoutDirection {\n  LEFT_TO_RIGHT,\n  RIGHT_TO_LEFT,\n  LEFT_AND_RIGHT\n}\n\nexport type DiagramConfig = {\n  editable?: boolean;\n  direction?: DiagramLayoutDirection;\n  nodeStyle?: NodeStyle;\n  hMargin?: number;\n  vMargin?: number;\n  focusBorderPadding?: number;\n  theme?: string;\n  themeConfigs?: object;\n  rootItemStyle?: any;\n  primaryItemStyle?: any;\n  normalItemStyle?: any;\n  editorRendererFn?: (diagramState, op, nodeKey, saveRef) => React.ReactNode;\n  descEditorRenderFn?: (diagramState, op, nodeKey, saveRef) => React.ReactNode;\n  focusItemsBorderRenderFn?: (diagramState, saveRef, getRef) => React.ReactNode;\n};\n\nconst defaultEditorRendererFn = (diagramState, op, nodeKey, saveRef) => {\n  return (\n    <DefaultNodeContentEditor\n      diagramState={diagramState}\n      op={op}\n      nodeKey={nodeKey}\n      saveRef={saveRef}\n    />\n  );\n};\n\nconst defaultDescEditorRendererFn = (diagramState, op, nodeKey, saveRef) => {\n  return (\n    <DefaultNodeDescEditor\n      diagramState={diagramState}\n      op={op}\n      nodeKey={nodeKey}\n      saveRef={saveRef}\n    />\n  );\n};\n\nconst defaultFocusItemsBorderRenderFn = (diagramState, saveRef, getRef) => {\n  return (\n    <DefaultFocusItemBorderSvg\n      diagramState={diagramState}\n      saveRef={saveRef}\n      getRef={getRef}\n      ref={saveRef('focusItemBorderSvg')}\n    />\n  );\n};\n\nexport const defaultDiagramConfig: DiagramConfig = {\n  direction: DiagramLayoutDirection.LEFT_AND_RIGHT,\n  nodeStyle: NodeStyle.ALL_HAS_BORDER,\n  hMargin: 10,\n  vMargin: 10,\n  focusBorderPadding: 4,\n  theme: 'theme2',\n  themeConfigs,\n  rootItemStyle: {\n    fontSize: '24px',\n    borderRadius: '10px',\n    padding: '10px 25px'\n  },\n  primaryItemStyle: {\n    fontSize: '16px',\n    borderRadius: '6px',\n    padding: '0'\n  },\n  normalItemStyle: {\n    fontSize: '16px',\n    borderRadius: '6px',\n    padding: '0'\n  },\n  editorRendererFn: defaultEditorRendererFn,\n  descEditorRenderFn: defaultDescEditorRendererFn,\n  focusItemsBorderRenderFn: defaultFocusItemsBorderRenderFn\n};\n","module.exports = require(\"immutable\");","module.exports = require(\"classnames\");","import { INodeModel, NodeKeyType, INodeRecordType } from '../types/Node';\nimport { Record, List } from 'immutable';\n// @ts-ignore\nimport MarkdownSerializer from './encoding/MarkdownSerializer';\n\ninterface IMindNodeRecordType extends INodeRecordType {\n  parentKey: NodeKeyType;\n  content: any;\n  desc: any;\n  subItemKeys?: List<NodeKeyType>;\n  collapse: boolean;\n}\n\nconst defaultMindNodeRecord: IMindNodeRecordType = {\n  key: null,\n  parentKey: null,\n  content: null,\n  desc: null,\n  subItemKeys: List(),\n  collapse: false\n};\n\n// @ts-ignore\nexport class MindNodeModel extends Record(defaultMindNodeRecord)\n  implements INodeModel {\n  constructor() {\n    super();\n  }\n  getKey(): NodeKeyType {\n    return this.get('key');\n  }\n\n  getParentKey(): NodeKeyType {\n    return this.get('parentKey');\n  }\n\n  getContent(): any {\n    return this.get('content');\n  }\n\n  getDesc(): any {\n    return this.get('desc');\n  }\n\n  getSubItemKeys(): List<NodeKeyType> {\n    return this.get('subItemKeys');\n  }\n\n  getCollapse(): boolean {\n    return this.get('collapse');\n  }\n\n  contentToString() {\n    const content = this.getContent();\n    if (typeof content === 'string') return content;\n    else {\n      return MarkdownSerializer.serialize(content);\n    }\n  }\n\n  descToString() {\n    const desc = this.getDesc();\n    if (desc === null) return null;\n    if (typeof desc === 'string') return desc;\n    else {\n      return MarkdownSerializer.serialize(desc);\n    }\n  }\n\n  toString() {\n    return this.toJSON().toString();\n  }\n\n  toJSON() {\n    return {\n      key: this.getKey(),\n      parentKey: this.getParentKey(),\n      subItemKeys: this.getSubItemKeys(),\n      collapse: this.getCollapse(),\n      content: this.contentToString(),\n      desc: this.descToString()\n    };\n  }\n\n  static create(\n    key: NodeKeyType,\n    parentKey = null,\n    content = 'new node',\n    subItemKeys = List([]),\n    collapse = false\n  ): MindNodeModel {\n    return MindNodeModel.createWith({\n      key,\n      parentKey,\n      content,\n      subItemKeys,\n      collapse\n    });\n  }\n\n  static createWith(obj: any): MindNodeModel {\n    let node = new MindNodeModel();\n    node = node.merge({\n      key: obj.key,\n      parentKey: obj.parentKey,\n      content: obj.content,\n      desc: obj.desc,\n      subItemKeys: List(obj.subItemKeys),\n      collapse: obj.collapse\n    });\n    return node;\n  }\n}\n","module.exports = require(\"awehook-rich-markdown-editor\");","import MarkdownSerializer from 'slate-md-serializer';\nexport default new MarkdownSerializer();\n","export function uuidv4() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    const r = (Math.random() * 16) | 0,\n      v = c == 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n\nexport function isRectEqual(r1, r2) {\n  return (\n    r1 &&\n    r2 &&\n    r1.left === r2.left &&\n    r1.top === r2.top &&\n    r1.width === r2.width &&\n    r1.height === r2.height\n  );\n}\n","module.exports = require(\"lodash\");","import * as React from 'react';\nimport { BaseWidget } from './common/BaseWidget';\nimport { NodeKeyType, NodeWidgetDirection } from '../types/Node';\nimport { DiagramState } from '../model/DiagramState';\nimport { MindMapModelModifier, OpType } from '../model/MindMapModelModifier';\nimport { NodePopupMenu } from './NodePopupMenu';\nimport { OpFunction } from '../types/FunctionType';\nimport styled from 'styled-components';\nimport debug from 'debug';\n\nconst log = debug('node:topic');\nconst logr = debug('render:topic');\n\ninterface TopicContentProps {\n  dragEnter: boolean;\n  isRoot: boolean;\n}\n\nconst TopicContent = styled.div<TopicContentProps>`\n  display: flex;\n  align-items: center;\n  word-wrap: break-word;\n  white-space: pre-line;\n  cursor: pointer;\n  overflow: hidden;\n  background: ${props =>\n    props.dragEnter\n      ? props.theme.color.primary\n      : props.isRoot\n      ? props.theme.color.primary\n      : null};\n  //@ts-ignore\n  padding: ${props => (props.isRoot ? '6px 0 6px 20px' : '6px 20px 6px 0')};\n  border: 2px solid ${props => props.theme.color.primary};\n`;\n\nconst DescIcon = styled.div`\n  &:hover {\n    color: ${props => props.theme.color.primary};\n  }\n`;\n\nconst DropArea = styled.div`\n  height: 20px;\n  width: 100%;\n`;\n\ninterface TopicContentWidgetProps {\n  diagramState: DiagramState;\n  op: (...args: any[]) => void;\n  nodeKey: NodeKeyType;\n  dir: NodeWidgetDirection;\n  draggable: boolean;\n  saveRef: Function;\n  getRef: Function;\n  isRoot?: boolean;\n}\n\ninterface TopicContentWidgetState {\n  dragEnter: boolean;\n  showPopMenu: boolean;\n}\n\nlet dragSrcItemKey: NodeKeyType = null;\n\nexport class TopicContentWidget extends BaseWidget<\n  TopicContentWidgetProps,\n  TopicContentWidgetState\n> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dragEnter: false,\n      showPopMenu: false\n    };\n  }\n\n  onDragStart = e => {\n    log('onDragStart');\n    dragSrcItemKey = this.props.nodeKey;\n    e.stopPropagation();\n  };\n\n  onDragOver = e => {\n    e.preventDefault();\n  };\n\n  onDragEnter = e => {\n    const { op, nodeKey } = this.props;\n    const tag = e.nativeEvent.target.dataset.tag;\n    if (\n      MindMapModelModifier.canDragAndDrop(\n        this.props.diagramState.getModel(),\n        dragSrcItemKey,\n        this.props.nodeKey,\n        tag\n      )\n    ) {\n      if (tag) {\n        op(OpType.SET_DROP_AREA_KEY, `${tag}:${nodeKey}`);\n        return;\n      }\n      this.setState({\n        dragEnter: true\n      });\n    }\n  };\n\n  onDragLeave = e => {\n    const { getRef, nodeKey, op } = this.props;\n    const tag = e.nativeEvent.target.dataset.tag;\n    if (tag) {\n      op(OpType.SET_DROP_AREA_KEY, null);\n      return;\n    }\n    const relatedTarget = e.nativeEvent.relatedTarget;\n    const content = getRef(`content-${nodeKey}`);\n    if (content == relatedTarget || content.contains(relatedTarget)) {\n      return;\n    }\n    this.setState({\n      dragEnter: false\n    });\n  };\n\n  onDrop = e => {\n    log('onDrop');\n    const { nodeKey, op } = this.props;\n    const tag = e.nativeEvent.target.dataset.tag;\n    const clearDropArea = {\n      opType: OpType.SET_DROP_AREA_KEY,\n      nodeKey: null\n    };\n    if (tag) {\n      op([\n        clearDropArea,\n        {\n          opType: OpType.DRAG_AND_DROP,\n          nodeKey: dragSrcItemKey,\n          arg: { dstKey: nodeKey, dir: tag }\n        }\n      ]);\n    } else {\n      op([\n        clearDropArea,\n        {\n          opType: OpType.DRAG_AND_DROP,\n          nodeKey: dragSrcItemKey,\n          arg: { dstKey: nodeKey, dir: 'in' }\n        }\n      ]);\n      this.setState({\n        dragEnter: false\n      });\n    }\n  };\n\n  isDoubleClick: boolean;\n\n  onClick = () => {\n    this.isDoubleClick = false;\n    setTimeout(() => {\n      if (!this.isDoubleClick) {\n        // log(\"TopicContentWidget onClick\");\n        const { diagramState, op, nodeKey } = this.props;\n        if (diagramState.getModel().getEditingContentItemKey() === nodeKey)\n          return;\n        op(OpType.SET_POPUP_MENU_ITEM_KEY, nodeKey);\n        this.setState({ showPopMenu: true });\n      }\n    }, 200);\n  };\n\n  onDoubleClick = () => {\n    this.isDoubleClick = true;\n    // log('TopicContentWidget onDoubleClick');\n    const { diagramState, op, nodeKey } = this.props;\n    if (diagramState.getModel().getEditingContentItemKey() === nodeKey) return;\n    op(OpType.START_EDITING_CONTENT, nodeKey);\n  };\n\n  handlePopMenuVisibleChange = visible => {\n    this.setState({\n      showPopMenu: visible\n    });\n  };\n\n  componentDidUpdate(\n    prevProps: Readonly<TopicContentWidgetProps>,\n    prevState: Readonly<TopicContentWidgetState>,\n    snapshot?: any\n  ): void {\n    const { diagramState, nodeKey } = this.props;\n    if (diagramState.getModel().getEditingContentItemKey() === nodeKey) {\n      document.addEventListener('click', this._handleClick);\n    } else {\n      document.removeEventListener('click', this._handleClick);\n    }\n  }\n\n  _handleClick = e => {\n    log(`_handleClick ${this.props.nodeKey}`);\n    const { getRef, nodeKey } = this.props;\n    const content: HTMLElement = getRef(`content-${nodeKey}`);\n    const contentRect = content.getBoundingClientRect();\n    const extend = 40;\n    const isInExtendBox =\n      e.clientX > contentRect.left - extend &&\n      e.clientX < contentRect.right + extend &&\n      e.clientY > contentRect.top &&\n      e.clientY < contentRect.bottom;\n    if (!isInExtendBox) {\n      // TODO 需要对编辑器进行修改，现在暂时有bug\n      // this.props.op(OpType.FOCUS_ITEM, null);\n    }\n  };\n\n  shouldComponentUpdate(\n    nextProps: Readonly<TopicContentWidgetProps>,\n    nextState: Readonly<TopicContentWidgetState>,\n    nextContext: any\n  ): boolean {\n    if (\n      this.state.dragEnter !== nextState.dragEnter ||\n      this.state.showPopMenu !== nextState.showPopMenu\n    )\n      return true;\n    const { diagramState: ds, nodeKey, dir } = this.props;\n    const {\n      diagramState: nextDS,\n      nodeKey: nextNodeKey,\n      dir: nextDir\n    } = nextProps;\n    if (nodeKey !== nextNodeKey || dir !== nextDir) return true;\n    const mm = ds.getModel();\n    const nextMm = nextDS.getModel();\n    const focusKey = mm.getFocusItemKey();\n    const nextFocusKey = nextMm.getFocusItemKey();\n    if (focusKey === nodeKey || nextFocusKey == nodeKey) {\n      if (nextFocusKey !== focusKey) return true;\n\n      const focusMode = mm.getFocusItemMode();\n      const nextFocusMode = nextMm.getFocusItemMode();\n      if (nextFocusMode !== focusMode) return true;\n    }\n    const content = mm.getItem(nodeKey).getContent();\n    const nextContent = nextMm.getItem(nodeKey).getContent();\n    if (content !== nextContent) return true;\n    return false;\n  }\n\n  render() {\n    const {\n      diagramState,\n      op,\n      nodeKey,\n      dir,\n      draggable,\n      saveRef,\n      getRef\n    } = this.props;\n    logr(nodeKey);\n    const mindMapModel = diagramState.getModel();\n    const config = diagramState.getConfig();\n    const visualLevel = mindMapModel.getItemVisualLevel(nodeKey);\n    let itemStyle;\n    switch (visualLevel) {\n      case 0:\n        itemStyle = config.rootItemStyle;\n        break;\n      case 1:\n        itemStyle = config.primaryItemStyle;\n        break;\n      default:\n        itemStyle = config.normalItemStyle;\n        break;\n    }\n\n    const item = mindMapModel.getItem(nodeKey);\n\n    const showPopMenu =\n      // mindMapModel.getPopupMenuItemKey() === nodeKey &&\n      this.state.showPopMenu;\n    const descString = item.descToString();\n    const showDescIcon = descString !== null && descString !== '';\n\n    return (\n      <div>\n        <DropArea\n          data-tag=\"before\"\n          onDragEnter={this.onDragEnter}\n          onDragLeave={this.onDragLeave}\n          onDrop={this.onDrop}\n          onDragOver={this.onDragOver}\n        />\n        <TopicContent\n          isRoot={dir === NodeWidgetDirection.ROOT}\n          dragEnter={this.state.dragEnter}\n          draggable={draggable}\n          style={itemStyle}\n          ref={saveRef(`content-${nodeKey}`)}\n          onDragStart={this.onDragStart}\n          onDragEnter={this.onDragEnter}\n          onDragLeave={this.onDragLeave}\n          onDragOver={this.onDragOver}\n          onDrop={this.onDrop}\n          onClick={this.onClick}\n          onDoubleClick={this.onDoubleClick}\n        >\n          {config.editorRendererFn(diagramState, op, nodeKey, saveRef)}\n          {showDescIcon && (\n            <DescIcon\n              className=\"iconfont bm-notes\"\n              onClick={e => {\n                e.stopPropagation();\n                op(OpType.START_EDITING_DESC, nodeKey);\n              }}\n            />\n          )}\n          {showPopMenu && (\n            <NodePopupMenu\n              diagramState={diagramState}\n              op={op}\n              nodeKey={nodeKey}\n              visible\n              handleVisibleChange={this.handlePopMenuVisibleChange}\n              getRef={getRef}\n            />\n          )}\n        </TopicContent>\n        <DropArea\n          data-tag=\"after\"\n          onDragEnter={this.onDragEnter}\n          onDragLeave={this.onDragLeave}\n          onDrop={this.onDrop}\n          onDragOver={this.onDragOver}\n        />\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\nimport { LinkWidget } from '../LinkWidget';\nimport { NodeWidget } from '../NodeWidget';\n\nexport function createSubNodesAndSubLinks(props, items) {\n  const {\n    diagramState,\n    op,\n    nodeKey,\n    dir,\n    setViewBoxScroll,\n    setViewBoxScrollDelta,\n    saveRef,\n    getRef,\n    isRoot\n  } = props;\n  const mindMapModel = diagramState.getModel();\n  const node = mindMapModel.getItem(nodeKey);\n  const dropAreaKey = mindMapModel.getDropAreaKey();\n  let dropArea;\n  if (dropAreaKey !== null) dropArea = dropAreaKey.split(':');\n  if (items.size === 0 || node.getCollapse()) return null;\n  const subItems = [],\n    subLinks = [],\n    subLinksKeys = [];\n\n  items.forEach(itemKey => {\n    subItems.push(\n      <NodeWidget\n        key={itemKey}\n        nodeKey={itemKey}\n        dir={dir}\n        diagramState={diagramState}\n        op={op}\n        setViewBoxScroll={setViewBoxScroll}\n        setViewBoxScrollDelta={setViewBoxScrollDelta}\n        saveRef={saveRef}\n        getRef={getRef}\n      />\n    );\n    let linkKey = `link-${nodeKey}-${itemKey}`;\n    subLinks.push(\n      <LinkWidget\n        diagramState={diagramState}\n        key={linkKey}\n        fromNodeKey={nodeKey}\n        toNodeKey={itemKey}\n        dir={dir}\n        getRef={getRef}\n        ref={saveRef(linkKey)}\n        isRoot={isRoot}\n      />\n    );\n    subLinksKeys.push(linkKey);\n    if (dropAreaKey !== null && itemKey === dropArea[1]) {\n      linkKey = `link-${nodeKey}-${itemKey}-${dropArea[0]}`;\n      subLinksKeys.push(linkKey);\n      subLinks.push(\n        <LinkWidget\n          diagramState={diagramState}\n          key={linkKey}\n          fromNodeKey={nodeKey}\n          toNodeKey={itemKey}\n          dir={dir}\n          getRef={getRef}\n          ref={saveRef(linkKey)}\n          dropDir={dropArea[0]}\n          isRoot={isRoot}\n        />\n      );\n    }\n  });\n\n  return {\n    subItems,\n    subLinks,\n    subLinksKeys\n  };\n}\n","import { MindMapModel } from './MindMapModel';\nimport { defaultDiagramConfig, DiagramConfig } from '../config/DiagramConfig';\nimport { MindMapModelModifier, OpType } from './MindMapModelModifier';\nimport { NodeKeyType } from '../types/Node';\nimport debug from 'debug';\nimport { ThemeConfig } from '../config/ThemeConfigs';\nimport { Stack, Record } from 'immutable';\nconst log = debug('model:DiagramState');\n\ntype DiagramStateRecordType = {\n  model: MindMapModel;\n  config: DiagramConfig;\n  allowUndo: boolean;\n  undoStack: Stack<MindMapModel>;\n  redoStack: Stack<MindMapModel>;\n};\n\nconst defaultRecord: DiagramStateRecordType = {\n  model: null,\n  config: null,\n  allowUndo: true,\n  undoStack: Stack(),\n  redoStack: Stack()\n};\n\nconst DiagramStateRecord = Record(defaultRecord);\n\nexport class DiagramState {\n  _immutable: Record<DiagramStateRecordType>;\n\n  constructor(immutable: Record<DiagramStateRecordType>) {\n    this._immutable = immutable;\n  }\n\n  getImmutable(): Record<DiagramStateRecordType> {\n    return this._immutable;\n  }\n\n  getThemeConfig(): ThemeConfig {\n    return this.getConfig().themeConfigs[this.getConfig().theme];\n  }\n\n  getModel(): MindMapModel {\n    return this.getImmutable().get('model');\n  }\n\n  getConfig(): DiagramConfig {\n    return this.getImmutable().get('config');\n  }\n\n  getAllowUndo(): boolean {\n    return this.getImmutable().get('allowUndo');\n  }\n\n  getUndoStack(): Stack<MindMapModel> {\n    return this.getImmutable().get('undoStack');\n  }\n  getRedoStack(): Stack<MindMapModel> {\n    return this.getImmutable().get('redoStack');\n  }\n\n  static undo(state: DiagramState): DiagramState {\n    if (!state.getAllowUndo()) {\n      return state;\n    }\n    const undoStack = state.getUndoStack();\n    const newModel = undoStack.peek();\n    if (!newModel) return state;\n    log('undo');\n    return DiagramState.set(state, {\n      model: newModel,\n      undoStack: undoStack.shift(),\n      redoStack: state.getRedoStack().push(state.getModel())\n    });\n  }\n\n  static redo(state: DiagramState): DiagramState {\n    if (!state.getAllowUndo()) {\n      return state;\n    }\n    const redoStack = state.getRedoStack();\n    const newModel = redoStack.peek();\n    if (!newModel) return state;\n\n    log('redo');\n    return DiagramState.set(state, {\n      model: newModel,\n      redoStack: redoStack.shift(),\n      undoStack: state.getUndoStack().push(state.getModel())\n    });\n  }\n\n  static set(state: DiagramState, obj: Object) {\n    log('set start', state.getImmutable());\n    const newInnerState = state.getImmutable().withMutations(innerState => {\n      innerState.merge(obj);\n    });\n    log('set end', newInnerState);\n    return new DiagramState(newInnerState);\n  }\n\n  static setModel(state: DiagramState, model: MindMapModel): DiagramState {\n    const innerState = state.getImmutable().set('model', model);\n    return new DiagramState(innerState);\n  }\n\n  static setConfig(state: DiagramState, config: DiagramConfig): DiagramState {\n    const innerState = state.getImmutable().set('config', config);\n    return new DiagramState(innerState);\n  }\n\n  static op(\n    state: DiagramState,\n    opType: OpType,\n    key: NodeKeyType,\n    arg?\n  ): DiagramState {\n    log(`op:${OpType[opType]}`);\n    if (!key && opType !== OpType.FOCUS_ITEM)\n      key = state.getModel().getFocusItemKey();\n    log('start:', state.getModel(), state.getUndoStack());\n    const { model, needPushUndo } = MindMapModelModifier.op(\n      state.getModel(),\n      opType,\n      key,\n      arg\n    );\n    if (state.getModel() === model) return state;\n    let innerState;\n    innerState = state.getImmutable().set('model', model);\n    if (needPushUndo) {\n      const undoStack = state.getUndoStack().push(state.getModel());\n      innerState = innerState.set('undoStack', undoStack);\n    }\n\n    log('end:', model, innerState.get('undoStack'));\n    return new DiagramState(innerState);\n  }\n  static createWith(model, config): DiagramState {\n    config = Object.assign(defaultDiagramConfig, config);\n    const innerState = new DiagramStateRecord({\n      model,\n      config\n    });\n    return new DiagramState(innerState);\n  }\n}\n","import { FocusItemMode, NodeKeyType } from '../types/Node';\nimport { Map, Record } from 'immutable';\nimport { MindNodeModel } from './MindNodeModel';\n\ntype MindMapRecordType = {\n  rootItemKey: NodeKeyType;\n  editorRootItemKey: NodeKeyType;\n  itemMap: Map<NodeKeyType, MindNodeModel>;\n  focusItemKey: NodeKeyType;\n  focusItemMode: FocusItemMode;\n  dropAreaKey: string;\n};\n\nconst defaultMindMapRecord: MindMapRecordType = {\n  rootItemKey: null,\n  editorRootItemKey: null,\n  itemMap: Map(),\n  focusItemKey: null,\n  focusItemMode: FocusItemMode.Normal,\n  dropAreaKey: null\n};\n\nexport class MindMapModel extends Record(defaultMindMapRecord) {\n  constructor() {\n    super();\n  }\n  getRootItemKey(): NodeKeyType {\n    return this.get('rootItemKey');\n  }\n\n  getRootItem(): MindNodeModel {\n    return this.getItem(this.getRootItemKey());\n  }\n\n  getDropAreaKey(): string {\n    return this.get('dropAreaKey');\n  }\n\n  getEditorRootItemKey(): NodeKeyType {\n    return this.get('editorRootItemKey');\n  }\n\n  getEditorRootItem(): MindNodeModel {\n    return this.getItemMap().get(this.getEditorRootItemKey());\n  }\n\n  getItemMap(): Map<NodeKeyType, MindNodeModel> {\n    return this.get('itemMap');\n  }\n\n  getFocusItemKey(): NodeKeyType {\n    return this.get('focusItemKey');\n  }\n\n  getFocusItemMode(): FocusItemMode {\n    return this.get('focusItemMode');\n  }\n\n  getEditingContentItemKey(): NodeKeyType {\n    if (this.get('focusItemMode') !== FocusItemMode.EditingContent) return null;\n    return this.getFocusItemKey();\n  }\n\n  getEditingDescItemKey(): NodeKeyType {\n    if (this.get('focusItemMode') !== FocusItemMode.EditingDesc) return null;\n    return this.getFocusItemKey();\n  }\n\n  getPopupMenuItemKey(): NodeKeyType {\n    if (this.get('focusItemMode') !== FocusItemMode.PopupMenu) return null;\n    return this.getFocusItemKey();\n  }\n\n  getItem(key: NodeKeyType): MindNodeModel {\n    return this.getItemMap().get(key);\n  }\n\n  getParentItem(key: NodeKeyType): MindNodeModel {\n    const item = this.getItem(key);\n    if (item.getParentKey()) return this.getItem(item.getParentKey());\n    return null;\n  }\n\n  getItemVisualLevel(key: NodeKeyType): number {\n    let item = this.getItem(key);\n    let level = 0;\n    while (item && item.getKey() !== this.getEditorRootItemKey()) {\n      level++;\n      item = this.getParentItem(item.getKey());\n    }\n    return level;\n  }\n\n  // serialize() {\n  //   return JSON.stringify(this);\n  // }\n\n  static createWith(obj: any): MindMapModel {\n    let model = new MindMapModel();\n    model = model.merge({\n      rootItemKey: obj.rootItemKey,\n      editorRootItemKey: obj.editorRootItemKey\n    });\n    model = model.withMutations(model => {\n      obj.items.forEach(itemObj => {\n        model.update('itemMap', itemMap =>\n          itemMap.set(itemObj.key, MindNodeModel.createWith(itemObj))\n        );\n      });\n    });\n    return model;\n  }\n}\n","export * from './component/DiagramWidget';\nexport * from './model/MindMapModel';\nexport * from './model/DiagramState';\nexport * from './model/MindDiagramModel';\nexport * from './config/DiagramConfig';\nexport * from './model/encoding/DataEncoding';\nexport * from './model/MindMapModelModifier';\nexport * from './types/Node';\n","import * as React from 'react';\nimport * as cx from 'classnames';\nimport { MindDragScrollWidget } from './MindDragScrollWidget';\nimport { BaseWidget } from './common/BaseWidget';\nimport { Modals } from './Modals';\nimport SaveRef from './common/SaveRef';\nimport { DiagramState } from '../model/DiagramState';\nimport { OnChangeFunction } from '../types/FunctionType';\nimport { OpType } from '../model/MindMapModelModifier';\nimport { NodeKeyType } from '../types/Node';\nimport Theme from './Theme';\nimport styled from 'styled-components';\nimport './DiagramWidget.css';\n\nconst Diagram = styled.div`\n  width: 100%;\n  height: 100%;\n`;\n\nexport interface MindDiagramWidgetProps {\n  diagramState: DiagramState;\n  onChange: OnChangeFunction;\n}\n\nexport class DiagramWidget<P extends MindDiagramWidgetProps> extends BaseWidget<\n  MindDiagramWidgetProps\n> {\n  constructor(props: MindDiagramWidgetProps) {\n    super(props);\n  }\n\n  //参数分为两种情况，array 表示批量执行多个操作\n  op = (...args: any[]) => {\n    if (args.length === 0) return;\n    const { diagramState, onChange } = this.props;\n    let newState;\n    if (Array.isArray(args[0])) {\n      const arr = args[0];\n      newState = diagramState;\n      arr.forEach(operation => {\n        const { opType, nodeKey, arg } = operation;\n        newState = DiagramState.op(newState, opType, nodeKey, arg);\n      });\n    } else {\n      let opType, nodeKey, arg;\n      opType = args[0];\n      if (args.length >= 2) {\n        nodeKey = args[1];\n      }\n      if (args.length >= 3) {\n        arg = args[2];\n      }\n      newState = DiagramState.op(diagramState, opType, nodeKey, arg);\n    }\n    onChange(newState);\n  };\n\n  // onKeyUp = e => {\n  //   log('DiagramWidget keyup');\n  //   switch (e.which) {\n  //     case Keys.TAB:\n  //       this.op(OpType.ADD_CHILD);\n  //       break;\n  //     case Keys.RETURN:\n  //       if(e.ctrlKey)\n  //         this.op(OpType.ADD_SIBLING);\n  //       break;\n  //   }\n  // };\n\n  render() {\n    const { diagramState } = this.props;\n    const theme = diagramState.getThemeConfig();\n    return (\n      <SaveRef>\n        {(saveRef, getRef) => (\n          <Theme theme={theme}>\n            <Diagram\n              className={cx({\n                [`${diagramState.getConfig().theme}`]: true\n              })}\n              // onKeyUp={this.onKeyUp}\n            >\n              {/*<Toolbar getRef={getRef}/>*/}\n              <MindDragScrollWidget\n                diagramState={diagramState}\n                op={this.op}\n                saveRef={saveRef}\n                getRef={getRef}\n              />\n              <Modals diagramState={diagramState} op={this.op} />\n            </Diagram>\n          </Theme>\n        )}\n      </SaveRef>\n    );\n  }\n}\n","import * as React from 'react';\nimport { BaseWidget } from './common/BaseWidget';\nimport { DragScrollWidget } from './common/DragScrollWidget';\nimport { NodeLayerWidget } from './NodeLayerWidget';\nimport { DiagramState } from '../model/DiagramState';\nimport { OpFunction } from '../types/FunctionType';\n\nexport interface MindDragScrollWidgetProps {\n  diagramState: DiagramState;\n  op: OpFunction;\n  saveRef?: Function;\n  getRef?: Function;\n}\n\nexport class MindDragScrollWidget<\n  P extends MindDragScrollWidgetProps\n> extends BaseWidget<MindDragScrollWidgetProps> {\n  constructor(props: MindDragScrollWidgetProps) {\n    super(props);\n  }\n\n  componentDidMount(): void {\n    const { getRef, diagramState } = this.props;\n    const mindMapModel = diagramState.getModel();\n    const rootTopic: HTMLElement = getRef(\n      `topic-${mindMapModel.getEditorRootItemKey()}`\n    );\n    const nodeLayer: HTMLElement = getRef('node-layer');\n    const rootTopicRect = rootTopic.getBoundingClientRect();\n    const nodeLayerRect = nodeLayer.getBoundingClientRect();\n    this.dragScrollWidget.setViewBoxScrollDelta(\n      0,\n      rootTopicRect.top -\n        nodeLayerRect.top -\n        this.dragScrollWidget.viewBox.getBoundingClientRect().height / 2 +\n        rootTopicRect.height\n    );\n  }\n\n  get dragScrollWidget(): DragScrollWidget {\n    return this.props.getRef('DragScrollWidget');\n  }\n  canDragFunc = () => {\n    const selection = document.getSelection();\n    return (\n      selection.anchorNode === null ||\n      selection.anchorNode.nodeType !== Node.TEXT_NODE\n    );\n  };\n\n  render() {\n    const { saveRef } = this.props;\n    return (\n      <DragScrollWidget\n        {...this.state}\n        ref={saveRef('DragScrollWidget')}\n        // canDragFunc={this.canDragFunc}\n      >\n        {(setViewBoxScroll, setViewBoxScrollDelta) => (\n          <NodeLayerWidget\n            {...this.props}\n            setViewBoxScroll={setViewBoxScroll}\n            setViewBoxScrollDelta={setViewBoxScrollDelta}\n            ref={saveRef('MindNodeLayerWidget')}\n          />\n        )}\n      </DragScrollWidget>\n    );\n  }\n}\n","import * as React from 'react';\nimport { BaseWidget } from './BaseWidget';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport styled from 'styled-components';\n\nconst DragScrollView = styled.div`\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: scroll;\n`;\n\nconst DragScrollContent = styled.div`\n  position: relative;\n  width: max-content;\n`;\n\ninterface DragScrollWidgetProps {\n  mouseKey?: 'left' | 'right';\n  needKeyPressed?: boolean;\n  canDragFunc?: () => Boolean;\n  children: (\n    setViewBoxScroll: (left: number, top: number) => void,\n    setViewBoxScrollDelta: (left: number, top: number) => void\n  ) => React.ReactNode;\n}\n\nexport class DragScrollWidget extends BaseWidget<DragScrollWidgetProps> {\n  constructor(props: DragScrollWidgetProps) {\n    super(props);\n    this.state = {\n      widgetStyle: {\n        width: '10000px',\n        height: '10000px'\n      }\n    };\n  }\n\n  static defaultProps = {\n    mouseKey: 'left',\n    needKeyPressed: false\n  };\n\n  contentResizeCallback = (\n    entries: ResizeObserverEntry[],\n    observer: ResizeObserver\n  ) => {\n    if (this.oldContentRect) {\n      const widgetStyle = {\n        width: this.content.clientWidth + this.viewBox.clientWidth * 2,\n        height: this.content.clientHeight + this.viewBox.clientHeight * 2\n      };\n      this.bigView.style.width = widgetStyle.width + 'px';\n      this.bigView.style.height = widgetStyle.height + 'px';\n    }\n    this.oldContentRect = entries[0].contentRect;\n  };\n\n  contentResizeObserver = new ResizeObserver(this.contentResizeCallback);\n  // oldScroll: { left: number; top: number };\n  oldContentRect: DOMRectReadOnly;\n  content: HTMLElement;\n  contentRef = ref => {\n    if (ref) {\n      this.content = ref;\n      this.contentResizeObserver.observe(this.content);\n    }\n  };\n\n  viewBox: HTMLElement;\n  viewBoxRef = ref => {\n    if (ref) {\n      this.viewBox = ref;\n      this.setViewBoxScroll(\n        this.viewBox.clientWidth,\n        this.viewBox.clientHeight\n      );\n    }\n  };\n\n  bigView: HTMLElement;\n  bigViewRef = ref => {\n    if (ref) {\n      this.bigView = ref;\n    }\n  };\n\n  setWidgetStyle = () => {\n    if (this.content && this.viewBox && this.bigView) {\n      this.bigView.style.width =\n        (this.content.clientWidth + this.viewBox.clientWidth) * 2 + 'px';\n      this.bigView.style.height =\n        (this.content.clientHeight + this.viewBox.clientHeight) * 2 + 'px';\n\n      this.content.style.left = this.viewBox.clientWidth + 'px';\n      this.content.style.top = this.viewBox.clientHeight + 'px';\n    }\n  };\n\n  setViewBoxScroll = (left: number, top: number) => {\n    // console.error(`setViewBoxScroll`);\n    if (this.viewBox) {\n      this.viewBox.scrollLeft = left;\n      this.viewBox.scrollTop = top;\n    }\n  };\n\n  setViewBoxScrollDelta = (deltaLeft: number, deltaTop: number) => {\n    // log(`setViewBoxScrollDelta ${deltaLeft} ${deltaTop}`);\n    if (this.viewBox) {\n      this.viewBox.scrollLeft += deltaLeft;\n      this.viewBox.scrollTop += deltaTop;\n    }\n  };\n\n  onMouseDown = e => {\n    // log('Drag Scroll onMouseDown');\n    // log(e.nativeEvent.target);\n\n    // mouseKey 表示鼠标按下那个键才可以进行拖动，左键或者右键\n    // needKeyPressed 为了支持是否需要按下ctrl键，才可以进行拖动\n    // canDragFunc是一个函数，它是为了支持使用者以传入函数的方式，这个函数的返回值表示当前的内容是否可以被拖拽而移动\n    const { mouseKey, needKeyPressed, canDragFunc } = this.props;\n    if (canDragFunc && !canDragFunc()) return;\n    if (\n      (e.button === 0 && mouseKey === 'left') ||\n      (e.button === 2 && mouseKey === 'right')\n    ) {\n      if (needKeyPressed) {\n        if (!e.ctrlKey) return;\n      }\n      this._lastCoordX = this.viewBox.scrollLeft + e.nativeEvent.clientX;\n      this._lastCoordY = this.viewBox.scrollTop + e.nativeEvent.clientY;\n      // console.log('add listener');\n      window.addEventListener('mousemove', this.onMouseMove);\n      window.addEventListener('mouseup', this.onMouseUp);\n    }\n  };\n\n  onMouseUp = e => {\n    // log('Drag Scroll onMouseUp');\n    window.removeEventListener('mousemove', this.onMouseMove);\n    window.removeEventListener('mouseup', this.onMouseUp);\n  };\n\n  // onDragEnter = e=> {\n  //   log('Drag Scroll onDragEnter');\n  //   window.removeEventListener(\"mousemove\", this.onMouseMove);\n  //   window.removeEventListener(\"mouseup\", this.onMouseUp);\n  // };\n\n  // _lastCoordX和_lastCorrdY 是为了在拖动过程中 计算 viewBox的scrollLeft和scrollTop值用到\n  // _lastCoordX和_lastCorrdY 记录下拖动开始时刻viewBox的scroll值和鼠标位置值\n  _lastCoordX: number;\n  _lastCoordY: number;\n\n  onMouseMove = (e: MouseEvent) => {\n    // console.log('onMouseMove');\n\n    this.viewBox.scrollLeft = this._lastCoordX - e.clientX;\n    this.viewBox.scrollTop = this._lastCoordY - e.clientY;\n  };\n\n  handleContextMenu = e => {\n    e.preventDefault();\n  };\n\n  componentDidMount(): void {\n    this.setWidgetStyle();\n    document.addEventListener('contextmenu', this.handleContextMenu);\n  }\n\n  componentWillUnmount(): void {\n    document.removeEventListener('contextmenu', this.handleContextMenu);\n  }\n\n  render() {\n    return (\n      <DragScrollView\n        ref={this.viewBoxRef}\n        onMouseDown={this.onMouseDown}\n        // onDragEnter={this.onDragEnter}\n      >\n        <div style={this.state.widgetStyle} ref={this.bigViewRef}>\n          <DragScrollContent\n            ref={this.contentRef}\n            style={this.state.contentStyle}\n          >\n            {this.props.children(\n              this.setViewBoxScroll,\n              this.setViewBoxScrollDelta\n            )}\n          </DragScrollContent>\n        </div>\n      </DragScrollView>\n    );\n  }\n}\n","module.exports = require(\"resize-observer-polyfill\");","import * as React from 'react';\nimport { BaseWidget } from './common/BaseWidget';\nimport { RootNodeWidget } from './RootNodeWidget';\nimport { DiagramState } from '../model/DiagramState';\nimport { OpFunction } from '../types/FunctionType';\nimport styled from 'styled-components';\n\nconst NodeLayer = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n`;\n\nexport interface MindNodeLayerWidgetProps {\n  diagramState: DiagramState;\n  op: OpFunction;\n  saveRef?: Function;\n  getRef?: Function;\n  setViewBoxScroll: (left: number, top: number) => void;\n  setViewBoxScrollDelta: (left: number, top: number) => void;\n}\n\nexport class NodeLayerWidget<\n  P extends MindNodeLayerWidgetProps\n> extends BaseWidget<MindNodeLayerWidgetProps, DiagramState> {\n  constructor(props: MindNodeLayerWidgetProps) {\n    super(props);\n  }\n\n  render() {\n    // console.error(\"MindNodeLayer render\");\n\n    const { setViewBoxScroll, setViewBoxScrollDelta, saveRef } = this.props;\n    return (\n      <NodeLayer ref={saveRef('node-layer')}>\n        {this.renderItems(setViewBoxScroll, setViewBoxScrollDelta)}\n      </NodeLayer>\n    );\n  }\n  renderItems(setViewBoxScroll, setViewBoxScrollDelta) {\n    const { diagramState, op, getRef, saveRef } = this.props;\n    const mindMapModel = diagramState.getModel();\n    const editorRootItemKey = mindMapModel.getEditorRootItemKey();\n    return (\n      <RootNodeWidget\n        diagramState={diagramState}\n        op={op}\n        nodeKey={editorRootItemKey}\n        saveRef={saveRef}\n        getRef={getRef}\n        setViewBoxScroll={setViewBoxScroll}\n        setViewBoxScrollDelta={setViewBoxScrollDelta}\n      />\n    );\n  }\n}\n","import * as React from 'react';\nimport { NodeKeyType, NodeWidgetDirection } from '../types/Node';\nimport { BaseWidget } from './common/BaseWidget';\nimport { DiagramState } from '../model/DiagramState';\nimport { MindNodeModel } from '../model/MindNodeModel';\nimport { DiagramLayoutDirection } from '../config/DiagramConfig';\nimport { LinkWidget } from './LinkWidget';\nimport { TopicContentWidget } from './TopicContentWidget';\nimport { OpFunction } from '../types/FunctionType';\nimport styled from 'styled-components';\nimport { createSubNodesAndSubLinks } from './utils';\nimport debug from 'debug';\nconst log = debug('render:RootNode');\n\nconst NodeLayerPart = styled.div`\n  display: flex;\n  position: relative;\n\n  align-items: ${props =>\n    //@ts-ignore\n    props.dir === NodeWidgetDirection.LEFT ? 'flex-end' : 'flex-start'};\n  flex-direction: column;\n\n  padding: ${props =>\n    //@ts-ignore\n    props.dir === NodeWidgetDirection.LEFT\n      ? '15px 60px 15px 0px'\n      : '15px 0px 15px 60px'};\n`;\n\nconst Topic = styled.div`\n  display: flex;\n  position: relative;\n  align-items: center;\n`;\n\nexport interface MindRootNodeWidgetProps {\n  diagramState: DiagramState;\n  op: OpFunction;\n  nodeKey: NodeKeyType;\n  saveRef?: Function;\n  getRef?: Function;\n  setViewBoxScroll: (left: number, top: number) => void;\n  setViewBoxScrollDelta: (left: number, top: number) => void;\n}\n\nexport interface MindNodeWidgetState {}\n\nexport class RootNodeWidget<\n  P extends MindRootNodeWidgetProps,\n  S extends MindNodeWidgetState\n> extends BaseWidget<MindRootNodeWidgetProps, MindNodeWidgetState> {\n  constructor(props: MindRootNodeWidgetProps) {\n    super(props);\n  }\n\n  getNodeModel(): MindNodeModel {\n    const { diagramState, nodeKey } = this.props;\n    return diagramState.getModel().getItem(nodeKey);\n  }\n\n  getPartItems(dir: DiagramLayoutDirection) {\n    const node = this.getNodeModel();\n    const subItemCount = node.getSubItemKeys().size;\n    const items = node.getSubItemKeys().toArray();\n    switch (dir) {\n      case DiagramLayoutDirection.LEFT_TO_RIGHT:\n        return [[], items];\n      case DiagramLayoutDirection.RIGHT_TO_LEFT:\n        return [items, []];\n      case DiagramLayoutDirection.LEFT_AND_RIGHT:\n        return [\n          items.slice(Math.ceil(subItemCount / 2), subItemCount),\n          items.slice(0, Math.ceil(subItemCount / 2))\n        ];\n    }\n  }\n\n  needRelocation: boolean = false;\n\n  componentDidUpdate(\n    prevProps: Readonly<MindRootNodeWidgetProps>,\n    prevState: Readonly<MindNodeWidgetState>,\n    snapshot?: any\n  ): void {\n    if (this.needRelocation) {\n      const newRect = this.collapseIcon.getBoundingClientRect();\n      this.props.setViewBoxScrollDelta(\n        newRect.left - this.oldCollapseIconRect.left,\n        newRect.top - this.oldCollapseIconRect.top\n      );\n      this.needRelocation = false;\n    }\n    this.layoutSubLinks();\n  }\n\n  componentDidMount() {\n    this.layoutSubLinks();\n  }\n\n  layoutSubLinks = () => {\n    const { getRef } = this.props;\n    this.subLinksKeys.forEach(linkKey => {\n      // @ts-ignore\n      const linkWidget: LinkWidget = getRef(linkKey);\n      linkWidget && linkWidget.layout();\n    });\n  };\n\n  collapseIcon: HTMLElement;\n  oldCollapseIconRect: ClientRect;\n  subLinksKeys = [];\n\n  // 以左右或者上下部分来分别进行渲染\n  renderPartItems(items: string[], dir: NodeWidgetDirection) {\n    const { saveRef } = this.props;\n\n    if (items.length === 0) return null;\n    const res = createSubNodesAndSubLinks(\n      { ...this.props, dir, isRoot: true },\n      items\n    );\n    if (!res) return null;\n    const { subItems, subLinks, subLinksKeys } = res;\n    this.subLinksKeys.push(...subLinksKeys);\n\n    const cxName = `bm-node-layer-${\n      dir === NodeWidgetDirection.LEFT ? 'left' : 'right'\n    }`;\n    return (\n      //@ts-ignore\n      <NodeLayerPart dir={dir} ref={saveRef(cxName)}>\n        {subItems}\n        {subLinks}\n      </NodeLayerPart>\n    );\n  }\n\n  render() {\n    log('render');\n    const { diagramState, op, nodeKey, saveRef, getRef } = this.props;\n    const mindMapModel = diagramState.getModel();\n    const config = diagramState.getConfig();\n    const [leftItems, rightItems] = this.getPartItems(config.direction);\n    this.subLinksKeys = [];\n    return (\n      <>\n        {this.renderPartItems(leftItems, NodeWidgetDirection.LEFT)}\n        <Topic\n          ref={\n            nodeKey === mindMapModel.getEditorRootItemKey()\n              ? saveRef(`topic-${nodeKey}`)\n              : null\n          }\n        >\n          <TopicContentWidget\n            diagramState={diagramState}\n            op={op}\n            nodeKey={nodeKey}\n            dir={NodeWidgetDirection.ROOT}\n            draggable={false}\n            saveRef={saveRef}\n            getRef={getRef}\n          />\n        </Topic>\n        {this.renderPartItems(rightItems, NodeWidgetDirection.RIGHT)}\n      </>\n    );\n  }\n}\n","import * as React from 'react';\nimport { DiagramState } from '../model/DiagramState';\nimport { NodeKeyType } from '../types/Node';\nimport RichMarkDownEditor from 'awehook-rich-markdown-editor';\nimport { OpType } from '../model/MindMapModelModifier';\nimport { debounce } from 'lodash';\nimport { OpFunction } from '../types/FunctionType';\nimport styled from 'styled-components';\nimport debug from 'debug';\nconst log = debug('node:content-editor');\n\nconst NodeContent = styled.div`\n  padding: 6px 6px;\n  //@ts-ignore\n  background-color: ${props => (props.readOnly ? null : '#e0e0e0')};\n  //@ts-ignore\n  cursor: ${props => (props.readOnly ? 'pointer' : 'text')};\n`;\n\ninterface DefaultNodeContentEditorProps {\n  diagramState: DiagramState;\n  op: OpFunction;\n  nodeKey: NodeKeyType;\n  saveRef?: Function;\n}\n\ninterface DefaultNodeContentEditorState {}\n\nexport class DefaultNodeContentEditor extends React.Component<\n  DefaultNodeContentEditorProps,\n  DefaultNodeContentEditorState\n> {\n  constructor(props) {\n    super(props);\n  }\n\n  onChange = (value: () => string) => {\n    const { op, nodeKey } = this.props;\n    op(OpType.SET_ITEM_CONTENT, nodeKey, value);\n  };\n\n  onMouseDown = e => {\n    // log('node editor mousedown');\n    e.stopPropagation();\n  };\n\n  onMouseMove = e => {\n    // log('node editor mousemove');\n    e.stopPropagation();\n  };\n\n  shouldComponentUpdate(\n    nextProps: Readonly<DefaultNodeContentEditorProps>,\n    nextState: Readonly<DefaultNodeContentEditorState>,\n    nextContext: any\n  ): boolean {\n    const { nodeKey: nextNodeKey, diagramState: nextDS } = nextProps;\n    const { nodeKey: nodeKey, diagramState: ds } = this.props;\n    if (nextNodeKey !== nodeKey) {\n      log('nextNodeKey !== nodeKey');\n      return true;\n    }\n    const editingKey = ds.getModel().getEditingContentItemKey();\n    const nextEditingKey = nextDS.getModel().getEditingContentItemKey();\n\n    if (\n      editingKey !== nextEditingKey &&\n      (editingKey === nodeKey || nextEditingKey === nodeKey)\n    )\n      return true;\n\n    if (\n      ds.getModel().getItem(nodeKey) !== nextDS.getModel().getItem(nextNodeKey)\n    ) {\n      log(\n        'ds.mindMapModel.getItem(nodeKey) !== nextDS.mindMapModel.getItem(nextNodeKey)'\n      );\n      return true;\n    }\n    return false;\n  }\n\n  render(): React.ReactNode {\n    log('render');\n    const { nodeKey, diagramState, saveRef } = this.props;\n    const mindMapModel = diagramState.getModel();\n    const nodeModel = mindMapModel.getItem(nodeKey);\n    const content = nodeModel.getContent();\n    const editingItemKey = mindMapModel.getEditingContentItemKey();\n\n    log('getEditingItemKey', editingItemKey);\n    const readOnly = !(nodeKey === editingItemKey);\n    return (\n      <NodeContent\n        //@ts-ignore\n        readOnly={readOnly}\n        ref={saveRef(`editor-${nodeKey}`)}\n        onMouseDown={this.onMouseDown}\n        onMouseMove={this.onMouseMove}\n      >\n        <RichMarkDownEditor\n          // id={nodeKey}\n          editorValue={content}\n          onChange={debounce(this.onChange)}\n          readOnly={readOnly}\n        />\n      </NodeContent>\n    );\n  }\n}\n","module.exports = require(\"slate-md-serializer\");","export enum NodeRelationship {\n  Ancestor,\n  Descendant,\n  Sibling,\n  None\n}\n","module.exports = require(\"slate\");","import * as React from 'react';\nimport { DiagramState } from '../model/DiagramState';\nimport { NodeKeyType } from '../types/Node';\nimport RichMarkDownEditor from 'awehook-rich-markdown-editor';\nimport { OpType } from '../model/MindMapModelModifier';\nimport { debounce } from 'lodash';\nimport { OpFunction } from '../types/FunctionType';\nimport styled from 'styled-components';\nimport debug from 'debug';\nconst log = debug('node:desc-editor');\n\nconst DescEditor = styled.div``;\n\ninterface DefaultNodeDescEditorProps {\n  diagramState: DiagramState;\n  op: OpFunction;\n  nodeKey: NodeKeyType;\n  saveRef?: Function;\n}\n\ninterface DefaultNodeDescEditorState {}\n\nexport class DefaultNodeDescEditor extends React.PureComponent<\n  DefaultNodeDescEditorProps,\n  DefaultNodeDescEditorState\n> {\n  constructor(props) {\n    super(props);\n  }\n\n  onChange = (value: () => string) => {\n    const { op, nodeKey } = this.props;\n    op(OpType.SET_ITEM_DESC, nodeKey, value);\n  };\n\n  onMouseDown = e => {\n    e.stopPropagation();\n  };\n\n  onMouseMove = e => {\n    e.stopPropagation();\n  };\n\n  render(): React.ReactNode {\n    const { nodeKey, diagramState } = this.props;\n    const mindMapModel = diagramState.getModel();\n    const nodeModel = mindMapModel.getItem(nodeKey);\n    const desc = nodeModel.getDesc();\n    log(\n      'DefaultNodeDescEditor render',\n      mindMapModel.getEditingDescItemKey(),\n      desc\n    );\n    //\"\" && 3 = \"\" 由于空字符\n    return (\n      desc !== undefined &&\n      desc !== null && (\n        <DescEditor\n          onMouseDown={this.onMouseDown}\n          onMouseMove={this.onMouseMove}\n        >\n          <RichMarkDownEditor\n            // id={nodeKey}\n            editorValue={desc}\n            onChange={debounce(this.onChange)}\n          />\n        </DescEditor>\n      )\n    );\n  }\n}\n","import * as React from 'react';\nimport { DiagramState } from '../model/DiagramState';\n\ninterface FocusItemBorderSvgProps {\n  diagramState: DiagramState;\n  saveRef?: Function;\n  getRef?: Function;\n}\n\ninterface FocusItemBorderSvgState {}\n\nexport class DefaultFocusItemBorderSvg extends React.Component<\n  FocusItemBorderSvgProps,\n  FocusItemBorderSvgState\n> {\n  render() {\n    return this.renderFocusItemBorder();\n  }\n\n  reLayout() {\n    this.forceUpdate();\n  }\n\n  renderFocusItemBorder() {\n    const { getRef, diagramState } = this.props;\n    const mindMapModel = diagramState.getModel();\n    const config = diagramState.getConfig();\n    const { focusBorderPadding } = config;\n\n    const focusItemKey = mindMapModel.getFocusItemKey();\n    if (focusItemKey) {\n      const focusTopic: HTMLElement = getRef(`content-${focusItemKey}`);\n      const nodeLayer: HTMLElement = getRef('node-layer');\n      if (focusTopic && nodeLayer) {\n        const focusTopicRect = focusTopic.getBoundingClientRect();\n        const nodeLayerRect = nodeLayer.getBoundingClientRect();\n        return (\n          <div className=\"bm-focus-svg\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              version=\"1.1\"\n              strokeWidth=\"2px\"\n              stroke=\"red\"\n              fill=\"none\"\n              width=\"3000px\"\n              height=\"3000px\"\n            >\n              <rect\n                x={`${focusTopicRect.left -\n                  nodeLayerRect.left -\n                  focusBorderPadding}`}\n                y={`${focusTopicRect.top -\n                  nodeLayerRect.top -\n                  focusBorderPadding}`}\n                rx=\"10\"\n                ry=\"10\"\n                width={`${focusTopicRect.width + 2 * focusBorderPadding}`}\n                height={`${focusTopicRect.height + 2 * focusBorderPadding}`}\n              />\n            </svg>\n          </div>\n        );\n      }\n    }\n    return null;\n  }\n}\n","export interface ThemeColor {\n  primary: string;\n  fontColor: string;\n}\nexport interface ThemeConfig {\n  name: string;\n  color: ThemeColor;\n}\n\nconst theme1: ThemeConfig = {\n  name: 'orange',\n  color: {\n    primary: 'orange',\n    fontColor: 'black'\n  }\n};\n\nconst theme2: ThemeConfig = {\n  name: 'pink',\n  color: {\n    primary: 'pink',\n    fontColor: 'black'\n  }\n};\n\nexport default {\n  theme1,\n  theme2\n};\n","import * as React from 'react';\nimport { NodeKeyType } from '../types/Node';\nimport { DiagramState } from '../model/DiagramState';\nimport {\n  NodePopupMenuItem,\n  NodePopupMenuItemConfig\n} from './NodePopupMenuItem';\nimport { OpType } from '../model/MindMapModelModifier';\nimport { OpFunction } from '../types/FunctionType';\nimport styled from 'styled-components';\nimport debug from 'debug';\nconst log = debug('node:popup-menu');\n\nconst PopupMenu = styled.div`\n  position: absolute;\n  bottom: calc(100% + 5px);\n  left: 0;\n  padding: 0 8px;\n  border-radius: 10px;\n  background-color: white;\n  box-shadow: rgb(170, 170, 170) 5px 5px 10px;\n  cursor: pointer;\n  z-index: 1;\n\n  width: max-content;\n  height: 50px;\n`;\n\ninterface NodePopupMenuProps {\n  nodeKey: NodeKeyType;\n  diagramState: DiagramState;\n  op: OpFunction;\n  visible: boolean;\n  handleVisibleChange: Function;\n\n  items?: Array<NodePopupMenuItemConfig>;\n  saveRef?: Function;\n  getRef?: Function;\n}\n\ninterface NodePopupMenuState {}\n\nexport class NodePopupMenu extends React.Component<\n  NodePopupMenuProps,\n  NodePopupMenuState\n> {\n  static defaultProps = {\n    items: [\n      {\n        icon: 'edit',\n        label: 'edit',\n        rootCanUse: true,\n        opType: OpType.START_EDITING_CONTENT\n      },\n      {\n        icon: 'add-sibling',\n        label: 'add sibling',\n        opType: OpType.ADD_SIBLING\n      },\n      {\n        icon: 'add-child',\n        label: 'add child',\n        rootCanUse: true,\n        opType: OpType.ADD_CHILD\n      },\n      {\n        icon: 'notes',\n        label: 'edit notes',\n        opType: OpType.START_EDITING_DESC\n      },\n      {\n        icon: 'delete-node',\n        label: 'delete node',\n        opType: OpType.DELETE_NODE\n      }\n    ]\n  };\n  componentDidMount() {\n    document.addEventListener('click', this._handleClick);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this._handleClick);\n  }\n\n  _handleClick = event => {\n    log('_handleClick');\n    const { visible } = this.props;\n    const wasOutside = !(event.target.contains === this.root);\n\n    log(`wasOutside ${wasOutside}`);\n\n    wasOutside &&\n      visible &&\n      this.props.handleVisibleChange &&\n      this.props.handleVisibleChange(false);\n  };\n\n  root: HTMLElement;\n\n  rootRef = ref => {\n    this.root = ref;\n  };\n\n  render() {\n    log('render:', this.props.visible);\n    const { visible, nodeKey, items, diagramState, op } = this.props;\n    const editorRootKey = diagramState.getModel().getEditorRootItemKey();\n    const menuItems = items.map(item =>\n      nodeKey === editorRootKey && !item.rootCanUse ? null : (\n        <NodePopupMenuItem\n          config={item}\n          key={`${nodeKey}-${item.label}`}\n          nodeKey={nodeKey}\n          diagramState={diagramState}\n          op={op}\n        />\n      )\n    );\n    return visible && <PopupMenu ref={this.rootRef}>{menuItems}</PopupMenu>;\n  }\n}\n","import * as React from 'react';\nimport * as cx from 'classnames';\nimport { OpType } from '../model/MindMapModelModifier';\nimport { DiagramState } from '../model/DiagramState';\nimport { NodeKeyType } from '../types/Node';\nimport { OpFunction } from '../types/FunctionType';\nimport styled from 'styled-components';\n\nconst MenuItem = styled.div`\n  display: inline-block;\n  margin: 10px;\n  &:hover {\n    color: ${props => props.theme.color.primary};\n  }\n  .icon {\n    text-align: center;\n  }\n  .label {\n    font-size: 20%;\n  }\n`;\n\nexport type NodePopupMenuItemConfig = {\n  icon: string;\n  label: string;\n  rootCanUse?: boolean;\n  opType?: OpType;\n  arg?: any;\n};\n\ninterface NodePopupMenuItemProps {\n  config: NodePopupMenuItemConfig;\n  diagramState: DiagramState;\n  op: OpFunction;\n  nodeKey: NodeKeyType;\n}\n\ninterface NodePopupMenuItemState {}\n\nexport class NodePopupMenuItem extends React.Component<\n  NodePopupMenuItemProps,\n  NodePopupMenuItemState\n> {\n  onClick = e => {\n    e.stopPropagation();\n    const { nodeKey, config, op } = this.props;\n    if (config.opType) op(config.opType, nodeKey, config.arg);\n  };\n\n  render() {\n    const { config } = this.props;\n    return (\n      <MenuItem onClick={this.onClick}>\n        <div\n          className={cx('icon', 'iconfont', `bm-${config.icon}`)}\n          onClick={this.onClick}\n        />\n        <div className=\"label\">{config.label}</div>\n      </MenuItem>\n    );\n  }\n}\n","import * as React from 'react';\nimport { BaseWidget } from './common/BaseWidget';\nimport { DropDirType, NodeKeyType, NodeWidgetDirection } from '../types/Node';\nimport { DiagramState } from '../model/DiagramState';\nimport { isRectEqual } from '../util';\nimport styled from 'styled-components';\nimport debug from 'debug';\nconst log = debug('node:LinkWidget');\nconst logr = debug('render:LinkWidget');\nconst logd = debug('drop:LinkWidget');\n\nconst Link = styled.div`\n  z-index: -1;\n  position: absolute;\n  left: 0;\n  top: 0;\n`;\n\ninterface LinkWidgetProps {\n  diagramState: DiagramState;\n  isRoot?: boolean;\n  fromNodeKey: NodeKeyType;\n  toNodeKey: NodeKeyType;\n  dir: NodeWidgetDirection;\n  saveRef?: Function;\n  getRef?: Function;\n  registerRefListener?: Function;\n  dropDir?: DropDirType;\n}\n\ninterface LinkWidgetState {\n  height: number;\n  width: number;\n\n  left: number;\n  top: number;\n}\n\nexport class LinkWidget<\n  P extends LinkWidgetProps,\n  S extends LinkWidgetState\n> extends BaseWidget<LinkWidgetProps, LinkWidgetState> {\n  constructor(props: LinkWidgetProps) {\n    super(props);\n  }\n\n  static defaultProps = {\n    isRoot: false\n  };\n\n  public layout() {\n    log('layout link %s => %s', this.props.fromNodeKey, this.props.toNodeKey);\n    this.props.isRoot ? this.layoutRoot() : this.layoutNormal();\n  }\n\n  prevPartLayerRect;\n  prevFromChildrenRect;\n  prevFromTopicRect;\n  prevToTopicRect;\n\n  partLayerRect;\n  fromChildrenRect;\n  fromTopicRect;\n  toTopicRect;\n\n  layoutRoot() {\n    const { dir, getRef } = this.props;\n    const partLayerElement: HTMLElement = getRef(\n      `bm-node-layer-${dir === NodeWidgetDirection.LEFT ? 'left' : 'right'}`\n    );\n    if (partLayerElement) {\n      this.partLayerRect = partLayerElement.getBoundingClientRect();\n      this.partLayerRect = partLayerElement.getBoundingClientRect();\n      this.setState({\n        width: this.partLayerRect.width,\n        height: this.partLayerRect.height\n      });\n    }\n  }\n\n  layoutNormal() {\n    const { getRef, fromNodeKey } = this.props;\n    // log('layoutNormal %s -> %s',fromNodeKey, toNodeKey);\n    const fromNodeChildren: HTMLElement = getRef(`children-${fromNodeKey}`);\n    if (fromNodeChildren) {\n      this.fromChildrenRect = fromNodeChildren.getBoundingClientRect();\n      this.setState({\n        width: this.fromChildrenRect.width,\n        height: this.fromChildrenRect.height\n      });\n    }\n  }\n\n  shouldComponentUpdate(\n    nextProps: Readonly<LinkWidgetProps>,\n    nextState: Readonly<LinkWidgetState>,\n    nextContext: any\n  ): boolean {\n    const {\n      isRoot,\n      getRef,\n      fromNodeKey,\n      toNodeKey,\n      diagramState,\n      dropDir\n    } = this.props;\n    if (dropDir) {\n      logd('shouldComponentUpdate:', dropDir);\n      return true;\n    }\n    // log(\"shouldComponentUpdate %s->%s\", fromNodeKey, toNodeKey);\n    logr(\n      diagramState.getConfig().theme,\n      nextProps.diagramState.getConfig().theme\n    );\n    if (\n      diagramState.getConfig().theme !==\n      nextProps.diagramState.getConfig().theme\n    )\n      return true;\n    if (\n      fromNodeKey !== nextProps.fromNodeKey ||\n      toNodeKey !== nextProps.toNodeKey\n    )\n      return true;\n    // log(this.prevPartLayerRect,this.partLayerRect);\n    if (isRoot && !isRectEqual(this.prevPartLayerRect, this.partLayerRect)) {\n      // log('is-root');\n      return true;\n    }\n    if (\n      !isRoot &&\n      !isRectEqual(this.prevFromChildrenRect, this.fromChildrenRect)\n    ) {\n      // log('not-root');\n      return true;\n    }\n    this.fromTopicRect = getRef(`topic-${fromNodeKey}`).getBoundingClientRect();\n    this.toTopicRect = getRef(`topic-${toNodeKey}`).getBoundingClientRect();\n    log(\n      '%s->%s',\n      fromNodeKey,\n      toNodeKey,\n      this.prevFromTopicRect,\n      this.fromTopicRect\n    );\n    log(\n      '%s->%s',\n      fromNodeKey,\n      toNodeKey,\n      this.prevToTopicRect,\n      this.toTopicRect\n    );\n    if (\n      isRectEqual(this.prevToTopicRect, this.toTopicRect) &&\n      isRectEqual(this.prevFromTopicRect, this.fromTopicRect)\n    ) {\n      log('rect is equal');\n      return false;\n    }\n    return true;\n  }\n\n  generatePath = () => {\n    if (this.props.isRoot) return this.generatePathStringRoot();\n    return this.generatePathStringForBorderNode();\n  };\n\n  generatePathStringForBorderNode = () => {\n    const {\n      fromNodeKey,\n      toNodeKey,\n      getRef,\n      dir,\n      diagramState,\n      dropDir\n    } = this.props;\n    const fromItem = diagramState.getModel().getItem(fromNodeKey);\n    const fromItemChildrenCount = fromItem.getSubItemKeys().size;\n    const fromTopic: HTMLElement = getRef(`topic-${fromNodeKey}`);\n    const toElementTopic: HTMLElement = getRef(`topic-${toNodeKey}`);\n    if (!fromTopic || !toElementTopic) {\n      return '';\n    }\n    const fromChildrenRect = getRef(\n      `children-${fromNodeKey}`\n    ).getBoundingClientRect();\n\n    const toElementTopicRect = toElementTopic.getBoundingClientRect();\n    const fromTopicRect = fromTopic.getBoundingClientRect();\n    let fromX, fromY, toX, toY;\n    const fakeDelta =\n      dropDir != null\n        ? dropDir === 'before'\n          ? -(toElementTopicRect.height - 40)\n          : toElementTopicRect.height - 40\n        : 0;\n    fromY = fromTopicRect.top + fromTopicRect.height / 2 - fromChildrenRect.top;\n    if (dir === NodeWidgetDirection.RIGHT) {\n      fromX = fromItemChildrenCount > 1 ? 1 : 0;\n\n      toX = toElementTopicRect.left - fromTopicRect.right;\n      toY =\n        toElementTopicRect.top +\n        toElementTopicRect.height / 2 -\n        fromChildrenRect.top +\n        fakeDelta;\n    } else {\n      fromX =\n        fromTopicRect.left -\n        fromChildrenRect.left -\n        (fromItemChildrenCount > 1 ? 1 : 0);\n\n      toX = toElementTopicRect.right - fromChildrenRect.left;\n      toY =\n        toElementTopicRect.top +\n        toElementTopicRect.height / 2 -\n        fromChildrenRect.top +\n        fakeDelta;\n    }\n    return this.generatePathStringWithParameter(\n      dir,\n      fromX,\n      fromY,\n      toX,\n      toY,\n      dropDir,\n      toElementTopicRect.width\n    );\n  };\n\n  generatePathStringRoot = () => {\n    const { fromNodeKey, toNodeKey, getRef, dir, dropDir } = this.props;\n    // if (dropDir) logd(\"generatePathStringRoot\");\n    const rootTopic: HTMLElement = getRef(`topic-${fromNodeKey}`);\n    const toElementTopic: HTMLElement = getRef(`topic-${toNodeKey}`);\n    if (!rootTopic || !toElementTopic) {\n      return '';\n    }\n\n    const toElementTopicRect = toElementTopic.getBoundingClientRect();\n    const fakeDelta =\n      dropDir != null\n        ? dropDir === 'before'\n          ? -(toElementTopicRect.height - 40)\n          : toElementTopicRect.height - 40\n        : 0;\n    // if (dropDir) logd(\"fakeDelta:\", fakeDelta);\n    const rootTopicRect = rootTopic.getBoundingClientRect();\n    let fromX, fromY, toX, toY, partLayerElement, partLayerRect;\n    if (dir === NodeWidgetDirection.RIGHT) {\n      partLayerElement = getRef('bm-node-layer-right');\n      partLayerRect = partLayerElement.getBoundingClientRect();\n      fromX = 0;\n\n      toX = toElementTopicRect.left - rootTopicRect.right;\n    } else {\n      partLayerElement = getRef('bm-node-layer-left');\n      partLayerRect = partLayerElement.getBoundingClientRect();\n      fromX = partLayerRect.right - partLayerRect.left;\n      toX = toElementTopicRect.right - partLayerRect.left;\n    }\n    fromY = rootTopicRect.top - partLayerRect.top + rootTopicRect.height / 2;\n    toY =\n      toElementTopicRect.top -\n      partLayerRect.top +\n      toElementTopicRect.height / 2 +\n      fakeDelta;\n\n    return this.generatePathStringWithParameter(\n      dir,\n      fromX,\n      fromY,\n      toX,\n      toY,\n      dropDir,\n      toElementTopicRect.width\n    );\n  };\n\n  generatePathStringWithParameter = (\n    dir,\n    fromX,\n    fromY,\n    toX,\n    toY,\n    dropFakeDir,\n    fakeRectWidth\n  ) => {\n    let curve;\n    if (fromY === toY) {\n      curve = `M${fromX},${fromY}L${toX},${toY}`;\n    } else {\n      const centerX = (fromX + toX) / 2;\n      const centerY = (fromY + toY) / 2;\n\n      if (dir === NodeWidgetDirection.RIGHT) {\n        curve = `M${fromX},${fromY}C${fromX},${centerY},${centerX},${toY},${toX},${toY}`;\n      } else {\n        curve = `M${toX},${toY}C${centerX},${toY},${fromX},${centerY},${fromX},${fromY}`;\n      }\n      log(this.props.toNodeKey, 'curve:', curve);\n    }\n    return (\n      <g>\n        <path d={curve} />\n        {dropFakeDir && (\n          <path\n            d={this.generateFakeRectPathString(dir, toX, toY, fakeRectWidth)}\n          />\n        )}\n      </g>\n    );\n  };\n\n  generateFakeRectPathString = (dir, toX, toY, width) => {\n    let res;\n    const halfHeight = 8;\n    if (dir === NodeWidgetDirection.RIGHT) {\n      res = `M${toX},${toY - halfHeight}H${toX + width}V${toY +\n        halfHeight}H${toX}V${toY - halfHeight}`;\n    } else {\n      res = `M${toX},${toY - halfHeight}H${toX - width}V${toY +\n        halfHeight}H${toX}V${toY - halfHeight}`;\n    }\n    logd('generateFakeRectPathString', res);\n    return res;\n  };\n\n  render() {\n    this.prevFromChildrenRect = this.fromChildrenRect;\n    this.prevPartLayerRect = this.partLayerRect;\n    this.prevFromTopicRect = this.fromTopicRect;\n    this.prevToTopicRect = this.toTopicRect;\n    if (this.state && this.state.width) {\n      logr('link %s->%s', this.props.fromNodeKey, this.props.toNodeKey);\n      const strokeColor = this.props.diagramState.getThemeConfig().color\n        .primary;\n      logr(strokeColor);\n      return (\n        <Link>\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            version=\"1.1\"\n            strokeWidth=\"2px\"\n            strokeDasharray={this.props.dropDir ? '5,5' : null}\n            stroke={strokeColor}\n            fill=\"none\"\n            {...this.state}\n          >\n            {this.generatePath()}\n          </svg>\n        </Link>\n      );\n    }\n    return null;\n  }\n}\n","import * as React from 'react';\nimport { NodeKeyType, NodeWidgetDirection } from '../types/Node';\nimport { BaseWidget } from './common/BaseWidget';\nimport { TopicContentWidget } from './TopicContentWidget';\nimport { DiagramState } from '../model/DiagramState';\nimport { OpType } from '../model/MindMapModelModifier';\nimport * as cx from 'classnames';\nimport { OpFunction } from '../types/FunctionType';\nimport styled from 'styled-components';\nimport debug from 'debug';\nimport { createSubNodesAndSubLinks } from './utils';\n\nconst logr = debug('render:NodeWidget');\n\nconst Node = styled.div`\n  display: flex;\n  align-items: center;\n  padding: 0px 10px;\n  flex-direction: ${props =>\n    //@ts-ignore\n    props.dir === NodeWidgetDirection.RIGHT ? 'row' : 'row-reverse'};\n`;\n\nconst NodeChildren = styled.div`\n  position: relative;\n  padding: 11px 0px;\n`;\n\nconst NodeTopic = styled.div`\n  display: flex;\n  position: relative;\n  align-items: center;\n  flex-direction: ${props =>\n    //@ts-ignore\n    props.dir === NodeWidgetDirection.RIGHT ? 'row' : 'row-reverse'};\n`;\n\nconst CollapseLine = styled.div`\n  height: 2px;\n  width: 30px;\n\n  background: ${props =>\n    //@ts-ignore\n    props.hide ? 'transparent' : props.theme.color.primary};\n`;\n\nconst Icon = styled.div`\n  position: relative;\n  top: -8px;\n  left: 5px;\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  text-align: center;\n  background-color: ${props => props.theme.color.primary};\n  cursor: pointer;\n  padding: 0;\n  font-size: 14px;\n  line-height: 20px;\n  border: 0;\n`;\n\nexport interface MindNodeWidgetProps {\n  diagramState: DiagramState;\n  op: OpFunction;\n  nodeKey: NodeKeyType;\n  dir: NodeWidgetDirection;\n  saveRef?: Function;\n  getRef?: Function;\n  setViewBoxScroll: (left: number, top: number) => void;\n  setViewBoxScrollDelta: (left: number, top: number) => void;\n}\n\nexport interface MindNodeWidgetState {\n  dragEnter: boolean;\n}\n\nexport class NodeWidget<\n  P extends MindNodeWidgetProps,\n  S extends MindNodeWidgetState\n> extends BaseWidget<MindNodeWidgetProps, MindNodeWidgetState> {\n  constructor(props: MindNodeWidgetProps) {\n    super(props);\n    this.state = {\n      dragEnter: false\n    };\n  }\n\n  onClickCollapse = e => {\n    e.stopPropagation();\n    this.needRelocation = true;\n    this.oldCollapseIconRect = this.collapseIcon.getBoundingClientRect();\n\n    this.props.op(OpType.TOGGLE_COLLAPSE, this.props.nodeKey);\n  };\n\n  needRelocation: boolean = false;\n\n  componentDidUpdate(\n    prevProps: Readonly<MindNodeWidgetProps>,\n    prevState: Readonly<MindNodeWidgetState>,\n    snapshot?: any\n  ): void {\n    if (this.needRelocation) {\n      const newRect = this.collapseIcon.getBoundingClientRect();\n      this.props.setViewBoxScrollDelta(\n        newRect.left - this.oldCollapseIconRect.left,\n        newRect.top - this.oldCollapseIconRect.top\n      );\n      this.needRelocation = false;\n    }\n    this.layoutSubLinks();\n  }\n\n  componentDidMount() {\n    this.layoutSubLinks();\n  }\n\n  layoutSubLinks = () => {\n    const { getRef } = this.props;\n    this.subLinksKeys.forEach(linkKey => {\n      const linkWidget = getRef(linkKey);\n      linkWidget.layout();\n    });\n  };\n\n  collapseIconRef = ref => {\n    if (ref) {\n      this.collapseIcon = ref;\n    }\n  };\n  collapseIcon: HTMLElement;\n  oldCollapseIconRect: ClientRect;\n\n  shouldComponentUpdate(\n    nextProps: Readonly<MindNodeWidgetProps>,\n    nextState: Readonly<MindNodeWidgetState>,\n    nextContext: any\n  ): boolean {\n    // TODO 后面再进行优化\n    return true;\n    // if (nextProps.nodeKey !== this.props.nodeKey) return true;\n    // let nodeKey = nextProps.nodeKey;\n    // let nextModel = nextProps.diagramState.mindMapModel;\n    // let model = this.props.diagramState.mindMapModel;\n    // let nextItem = nextModel.getItem(\n    //   nodeKey\n    // );\n    // let item = model.getItem(nodeKey);\n    //\n    // if (nextItem !== item) return true;\n    //\n    // let nextFocusKey = nextModel.getFocusItemKey();\n    // let focusKey = model.getFocusItemKey();\n    // if(nextFocusKey!==focusKey && (nodeKey===nextFocusKey || nodeKey ===focusKey))\n    //   return  true;\n    //\n    // let nextFocusMode = nextModel.getFocusItemMode();\n    // let focusMode = model.getFocusItemMode();\n    // if(nextFocusMode!==focusMode && (nodeKey===nextFocusKey || nodeKey ===focusKey))\n    //   return true;\n    // return false;\n  }\n\n  subLinksKeys = [];\n\n  renderSubItems() {\n    const { diagramState, dir, saveRef, nodeKey } = this.props;\n    const mindMapModel = diagramState.getModel();\n    const node = mindMapModel.getItem(nodeKey);\n    const diagramConfig = diagramState.getConfig();\n    const inlineStyle =\n      dir === NodeWidgetDirection.LEFT\n        ? {\n            paddingRight: diagramConfig.hMargin\n          }\n        : {\n            paddingLeft: diagramConfig.hMargin\n          };\n    const items = node.getSubItemKeys().toArray();\n    const res = createSubNodesAndSubLinks(this.props, items);\n    if (!res) return null;\n    const { subItems, subLinks, subLinksKeys } = res;\n    this.subLinksKeys = subLinksKeys;\n    return (\n      <NodeChildren style={inlineStyle} ref={saveRef(`children-${nodeKey}`)}>\n        {subItems}\n        {subLinks}\n      </NodeChildren>\n    );\n  }\n\n  render() {\n    const { diagramState, op, nodeKey, dir, saveRef, getRef } = this.props;\n    this.subLinksKeys = [];\n    logr(nodeKey);\n    const mindMapModel = diagramState.getModel();\n    const node = mindMapModel.getItem(nodeKey);\n    return (\n      <Node\n        //@ts-ignore\n        dir={dir}\n      >\n        <NodeTopic\n          //@ts-ignore\n          dir={dir}\n          ref={saveRef(`topic-${nodeKey}`)}\n        >\n          <TopicContentWidget\n            diagramState={diagramState}\n            op={op}\n            nodeKey={nodeKey}\n            dir={dir}\n            draggable\n            saveRef={saveRef}\n            getRef={getRef}\n          />\n          {node.getSubItemKeys().size > 0 ? (\n            <CollapseLine\n              //@ts-ignore\n              hide={node.getCollapse()}\n              ref={saveRef(`line-${nodeKey}`)}\n            >\n              <Icon\n                ref={this.collapseIconRef}\n                className={cx({\n                  iconfont: node.getSubItemKeys().size > 0,\n                  [`bm-${node.getCollapse() ? 'plus' : 'minus'}`]:\n                    node.getSubItemKeys().size > 0\n                })}\n                onClick={this.onClickCollapse}\n              />\n            </CollapseLine>\n          ) : null}\n        </NodeTopic>\n        {this.renderSubItems()}\n      </Node>\n    );\n  }\n}\n","import * as React from 'react';\nimport { BaseModal } from './common/BaseModal';\nimport { DiagramState } from '../model/DiagramState';\nimport { OpFunction } from '../types/FunctionType';\nimport { FocusItemMode } from '../types/Node';\nimport { OpType } from '../model/MindMapModelModifier';\nimport styled from 'styled-components';\n\ninterface ModalsProps {\n  diagramState: DiagramState;\n  op: OpFunction;\n  saveRef?: Function;\n}\ninterface ModalsState {}\nconst DescWrapper = styled.div`\n  border: 1px solid #d9d9d9;\n  height: calc(100% - 50px);\n  padding: 0 1rem;\n  overflow: auto;\n  margin: 0.5rem 0.5rem 0 0.5rem;\n`;\nconst EditDescModal = ({ diagramState, op, nodeKey, saveRef }) => {\n  return (\n    <React.Fragment>\n      <DescWrapper>\n        {diagramState\n          .getConfig()\n          .descEditorRenderFn(diagramState, op, nodeKey, saveRef)}\n      </DescWrapper>\n    </React.Fragment>\n  );\n};\n\nexport class Modals extends React.Component<ModalsProps, ModalsState> {\n  handleClose = () => {\n    this.props.op(OpType.END_EDITING);\n  };\n\n  getActiveModalName = () => {\n    const focusItemMode = this.props.diagramState.getModel().getFocusItemMode();\n    if (focusItemMode === FocusItemMode.EditingDesc) return 'edit-desc';\n    return null;\n  };\n\n  render() {\n    const { diagramState, op, saveRef } = this.props;\n    const mindMapModel = diagramState.getModel();\n    const activeModalName = this.getActiveModalName();\n    const Modal = ({ name, children, ...rest }) => {\n      return (\n        <BaseModal\n          isOpen={activeModalName === name}\n          onRequestClose={this.handleClose}\n          {...rest}\n        >\n          {React.cloneElement(children)}\n        </BaseModal>\n      );\n    };\n\n    return (\n      <span>\n        <Modal name=\"edit-desc\" title=\"Edit Notes\">\n          <EditDescModal\n            diagramState={diagramState}\n            op={op}\n            nodeKey={mindMapModel.getEditingDescItemKey()}\n            saveRef={saveRef}\n          />\n        </Modal>\n      </span>\n    );\n  }\n}\n","import * as React from 'react';\nimport * as ReactModal from 'react-modal';\nimport styled from 'styled-components';\nimport breakpoint from 'styled-components-breakpoint';\nimport { Flex } from './Flex';\n\nReactModal.setAppElement('#root');\n\nconst StyledModal = styled(ReactModal)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  z-index: 100;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  overflow-x: hidden;\n  overflow-y: auto;\n  outline: none;\n  background-color: rgba(0, 0, 0, 0.2);\n`;\n\n//@ts-ignore\nconst Content = styled(Flex)`\n  width: 640px;\n  height: 90%;\n  background: white;\n  border: 1px solid #d9d9d9;\n  max-width: 100%;\n  position: relative;\n`;\n\nconst ModalTitle = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  color: #e4e4e4;\n  background: #5b637a;\n\n  height: 30px;\n`;\n\nconst Close = styled.span`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 24px;\n  height: 24px;\n  margin-right: 5px;\n  &:hover {\n    color: black;\n    background: #d7d7d7;\n  }\n  \n\n  // ${breakpoint('tablet')`\n  //   top: 1rem;\n  //   right: 1rem;\n  // `};\n`;\n\ntype Props = {\n  children?: React.ReactNode;\n  isOpen: boolean;\n  title?: string;\n  onRequestClose: () => any;\n};\n\nexport const BaseModal = ({\n  children,\n  isOpen,\n  title = 'Untitled',\n  onRequestClose,\n  ...rest\n}: Props) => {\n  if (!isOpen) return null;\n\n  return (\n    <React.Fragment>\n      <StyledModal\n        isOpen={isOpen}\n        onRequestClose={onRequestClose}\n        contentLabel={title}\n      >\n        <Content column>\n          <ModalTitle>\n            <div />\n            <span>{title}</span>\n            <Close onClick={onRequestClose}>\n              <div className=\"iconfont bm-close\" />\n            </Close>\n          </ModalTitle>\n\n          {children}\n        </Content>\n      </StyledModal>\n    </React.Fragment>\n  );\n};\n","module.exports = require(\"react-modal\");","module.exports = require(\"styled-components-breakpoint\");","import * as React from 'react';\nimport styled from 'styled-components';\n\ntype JustifyValues =\n  | 'center'\n  | 'space-around'\n  | 'space-between'\n  | 'flex-start'\n  | 'flex-end';\n\ntype AlignValues =\n  | 'stretch'\n  | 'center'\n  | 'baseline'\n  | 'flex-start'\n  | 'flex-end';\n\ntype Props = {\n  column?: boolean;\n  shrink?: boolean;\n  align?: AlignValues;\n  justify?: JustifyValues;\n  auto?: boolean;\n  className?: string;\n  children?: React.ReactNode;\n};\n\nexport const Flex = (props: Props) => {\n  const { children, ...restProps } = props;\n  return <Container {...restProps}>{children}</Container>;\n};\n\nconst Container = styled.div`\n  display: flex;\n  //@ts-ignore\n  flex: ${({ auto }) => (auto ? '1 1 auto' : 'initial')};\n  //@ts-ignore\n  flex-direction: ${({ column }) => (column ? 'column' : 'row')};\n  //@ts-ignore\n  align-items: ${({ align }) => align};\n  //@ts-ignore\n  justify-content: ${({ justify }) => justify};\n  //@ts-ignore\n  flex-shrink: ${({ shrink }) => (shrink ? 1 : 'initial')};\n  min-height: 0;\n  min-width: 0;\n`;\n","import * as React from 'react';\n\ninterface SaveRefProps {\n  children: (\n    saveRef: Function,\n    getRef: Function,\n    registerRefListener: Function\n  ) => React.ReactNode;\n}\n\ntype RefListener = (name: string, ref: HTMLElement) => void;\n\nexport default class SaveRef extends React.Component<SaveRefProps> {\n  getRef = name => {\n    return this[name];\n  };\n\n  saveRef = name => {\n    return node => {\n      if (node) {\n        this[name] = node;\n        this.fireListener(name, node);\n      }\n    };\n  };\n\n  observers: Map<string, [RefListener]> = new Map();\n\n  fireListener = (name: string, ref: HTMLElement) => {\n    if (this.observers.has(name)) {\n      const listeners = this.observers.get(name);\n      for (const listener of listeners) {\n        listener(name, ref);\n      }\n    }\n  };\n\n  registerRefListener = (name, listener: RefListener) => {\n    if (!this.observers.has(name)) {\n      this.observers.set(name, [listener]);\n    } else {\n      this.observers.get(name).push(listener);\n    }\n  };\n\n  render() {\n    return this.props.children(\n      this.saveRef,\n      this.getRef,\n      this.registerRefListener.bind(this)\n    );\n  }\n}\n","import * as React from 'react';\nimport { ThemeProvider } from 'styled-components';\n\nexport default function Theme({ theme, children }) {\n  return (\n    //@ts-ignore\n    <ThemeProvider theme={theme}>\n      <React.Fragment>{children}</React.Fragment>\n    </ThemeProvider>\n  );\n}\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!./DiagramWidget.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./DiagramWidget.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./DiagramWidget.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\nexports.push([module.id, \"@import url(//at.alicdn.com/t/font_1280682_drzkpb3q7yf.css);\", \"\"]);\n\n// module\nexports.push([module.id, \".iconfont {\\n  vertical-align: middle;\\n}\\n\\n.fXedfB {\\n  background: inherit;\\n}\\n\", \"\"]);\n\n// exports\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target) {\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","import { MindMapModel } from './MindMapModel';\nimport { defaultDiagramConfig, DiagramConfig } from '../config/DiagramConfig';\n\nexport class MindDiagramModel {\n  mindMapModel: MindMapModel;\n  config?: DiagramConfig;\n  zoom: number;\n  //gridSize: number;\n\n  constructor(mindMapModel: MindMapModel, config: DiagramConfig = {}) {\n    this.mindMapModel = mindMapModel;\n    this.config = Object.assign(defaultDiagramConfig, config);\n    this.zoom = 1;\n  }\n}\n","import { MindMapModel } from '../MindMapModel';\nimport MarkdownSerializer from './MarkdownSerializer';\nimport { MindNodeModel } from '../MindNodeModel';\nimport debug from 'debug';\nconst log = debug('model:encoding');\n\nexport function convertMindMapModelToRaw(model: MindMapModel) {\n  const obj: any = {};\n  obj.rootItemKey = model.getRootItemKey();\n  obj.items = model.getItemMap();\n  const title = model.getRootItem().getContent();\n  if (typeof title === 'string') obj.title = title;\n  else obj.title = MarkdownSerializer.serialize(title);\n  return obj;\n}\n\nexport function convertRawToMindMapModel(obj): MindMapModel {\n  let model = new MindMapModel();\n  model = model.merge({\n    rootItemKey: obj.rootItemKey,\n    editorRootItemKey: obj.rootItemKey\n  });\n  log('convertRawToMindMapModel');\n  model = model.withMutations(model => {\n    Object.keys(obj.items).forEach(key => {\n      const itemObj = obj.items[key];\n      model.update('itemMap', itemMap =>\n        itemMap.set(itemObj.key, MindNodeModel.createWith(itemObj))\n      );\n    });\n  });\n  return model;\n}\n"],"sourceRoot":""}