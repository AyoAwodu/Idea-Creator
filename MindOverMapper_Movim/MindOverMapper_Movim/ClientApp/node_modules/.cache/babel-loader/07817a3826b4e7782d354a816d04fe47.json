{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _isEqual2 = require(\"lodash/isEqual\");\n\nvar _isEqual3 = _interopRequireDefault(_isEqual2);\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _reactPortal = require(\"react-portal\");\n\nvar _slate = require(\"slate\");\n\nvar _slateReact = require(\"slate-react\");\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nvar _outlineIcons = require(\"outline-icons\");\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nfunction findClosestRootNode(value, ev) {\n  var previous = void 0;\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = value.document.nodes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var node = _step.value;\n      var element = (0, _slateReact.findDOMNode)(node);\n      var bounds = element.getBoundingClientRect();\n      if (bounds.top > ev.clientY) return previous;\n      previous = {\n        node: node,\n        element: element,\n        bounds: bounds\n      };\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return previous;\n}\n\nvar BlockInsert = function (_React$Component) {\n  _inherits(BlockInsert, _React$Component);\n\n  function BlockInsert() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, BlockInsert);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = BlockInsert.__proto__ || Object.getPrototypeOf(BlockInsert)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      top: -1000,\n      left: -1000,\n      active: false,\n      closestRootNode: undefined\n    }, _this.componentDidMount = function () {\n      if (typeof window !== \"undefined\") {\n        window.addEventListener(\"mousemove\", _this.handleMouseMove);\n      }\n    }, _this.componentWillUnmount = function () {\n      if (_this.mouseMoveTimeout) clearTimeout(_this.mouseMoveTimeout);\n\n      if (typeof window !== \"undefined\") {\n        window.removeEventListener(\"mousemove\", _this.handleMouseMove);\n      }\n    }, _this.setInactive = function () {\n      _this.setState({\n        active: false\n      });\n    }, _this.handleMouseMove = function (ev) {\n      var triggerPoint = _this.ref ? _this.ref.getBoundingClientRect().left + 300 : window.innerWidth;\n      var result = findClosestRootNode(_this.props.editor.value, ev);\n\n      var newState = _extends({}, _this.state);\n\n      newState.active = ev.clientX < triggerPoint;\n\n      if (result) {\n        newState.closestRootNode = result.node; // do not show block menu when it's open, the paragraph isn't empty\n        // or the current node is an embed.\n\n        var hideToolbar = result.node.type !== \"paragraph\" || !!result.node.text.trim() || result.node.isVoid;\n\n        if (hideToolbar) {\n          newState.left = -1000;\n          newState.active = false;\n        } else {\n          newState.left = Math.round(result.bounds.left - 20);\n          newState.top = Math.round(result.bounds.top + window.scrollY);\n        }\n      }\n\n      if (_this.state.active) {\n        if (_this.mouseMoveTimeout) clearTimeout(_this.mouseMoveTimeout);\n        _this.mouseMoveTimeout = setTimeout(_this.setInactive, 2000);\n      }\n\n      if (!(0, _isEqual3.default)(newState, _this.state)) {\n        _this.setState(newState);\n      }\n    }, _this.handleClick = function (ev) {\n      ev.preventDefault();\n      ev.stopPropagation();\n\n      _this.setState({\n        active: false\n      });\n\n      var editor = _this.props.editor; // remove any existing toolbars in the document as a fail safe\n\n      editor.value.document.nodes.forEach(function (node) {\n        if (node.type === \"block-toolbar\") {\n          editor.setNodeByKey(node.key, {\n            type: \"paragraph\",\n            isVoid: false\n          });\n        }\n      });\n      var node = _this.state.closestRootNode;\n      if (!node) return; // we're on an empty paragraph. just replace it with the block toolbar\n\n      if (!node.text.trim() && node.type === \"paragraph\") {\n        editor.setNodeByKey(node.key, {\n          type: \"block-toolbar\",\n          isVoid: true\n        });\n      }\n    }, _this.setRef = function (ref) {\n      _this.ref = ref;\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(BlockInsert, [{\n    key: \"render\",\n    value: function render() {\n      var theme = this.props.theme;\n      var style = {\n        top: this.state.top + \"px\",\n        left: this.state.left + \"px\"\n      };\n      return React.createElement(React.Fragment, null, React.createElement(\"span\", {\n        ref: this.setRef\n      }), React.createElement(_reactPortal.Portal, null, React.createElement(Trigger, {\n        active: this.state.active,\n        style: style\n      }, React.createElement(_outlineIcons.PlusIcon, {\n        onClick: this.handleClick,\n        color: theme.blockToolbarTrigger\n      }))));\n    }\n  }]);\n\n  return BlockInsert;\n}(React.Component);\n\nvar Trigger = _styledComponents2.default.div.withConfig({\n  displayName: \"BlockInsert__Trigger\",\n  componentId: \"sc-9hcx4i-0\"\n})([\"position:absolute;z-index:\", \";opacity:0;background-color:\", \";transition:opacity 150ms cubic-bezier(0.175,0.885,0.32,1.275),transform 150ms cubic-bezier(0.175,0.885,0.32,1.275);line-height:0;margin-left:-10px;box-shadow:inset 0 0 0 2px \", \";border-radius:100%;transform:scale(0.9);cursor:pointer;&:hover{background-color:\", \";svg{fill:\", \";}}\", \";\"], function (props) {\n  return props.theme.zIndex + 99;\n}, function (props) {\n  return props.theme.background;\n}, function (props) {\n  return props.theme.blockToolbarTrigger;\n}, function (props) {\n  return props.theme.blockToolbarTrigger;\n}, function (props) {\n  return props.theme.blockToolbarTriggerIcon;\n}, function (_ref2) {\n  var active = _ref2.active;\n  return active && \"\\n    transform: scale(1);\\n    opacity: .9;\\n  \";\n});\n\nexports.default = (0, _styledComponents.withTheme)(BlockInsert);","map":{"version":3,"sources":["C:/Users/ayomi/Source/Repos/Idea-Creator/Idea-Creator/MindOverMapper_Movim/MindOverMapper_Movim/ClientApp/node_modules/awehook-rich-markdown-editor/lib/components/BlockInsert.js"],"names":["Object","defineProperty","exports","value","_isEqual2","require","_isEqual3","_interopRequireDefault","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","React","_interopRequireWildcard","_reactPortal","_slate","_slateReact","_styledComponents","_styledComponents2","_outlineIcons","obj","__esModule","newObj","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","findClosestRootNode","ev","previous","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_iterator","document","nodes","Symbol","iterator","_step","next","done","node","element","findDOMNode","bounds","getBoundingClientRect","top","clientY","err","return","BlockInsert","_React$Component","_ref","_temp","_this","_ret","_len","args","Array","_key","getPrototypeOf","apply","concat","state","left","active","closestRootNode","componentDidMount","window","addEventListener","handleMouseMove","componentWillUnmount","mouseMoveTimeout","clearTimeout","removeEventListener","setInactive","setState","triggerPoint","ref","innerWidth","result","editor","newState","clientX","hideToolbar","type","text","trim","isVoid","Math","round","scrollY","setTimeout","handleClick","preventDefault","stopPropagation","forEach","setNodeByKey","setRef","render","theme","style","createElement","Fragment","Portal","Trigger","PlusIcon","onClick","color","blockToolbarTrigger","Component","div","withConfig","displayName","componentId","zIndex","background","blockToolbarTriggerIcon","_ref2","withTheme"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _isEqual2 = require(\"lodash/isEqual\");\n\nvar _isEqual3 = _interopRequireDefault(_isEqual2);\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _reactPortal = require(\"react-portal\");\n\nvar _slate = require(\"slate\");\n\nvar _slateReact = require(\"slate-react\");\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nvar _outlineIcons = require(\"outline-icons\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction findClosestRootNode(value, ev) {\n  var previous = void 0;\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = value.document.nodes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var node = _step.value;\n\n      var element = (0, _slateReact.findDOMNode)(node);\n      var bounds = element.getBoundingClientRect();\n      if (bounds.top > ev.clientY) return previous;\n      previous = { node: node, element: element, bounds: bounds };\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return previous;\n}\n\nvar BlockInsert = function (_React$Component) {\n  _inherits(BlockInsert, _React$Component);\n\n  function BlockInsert() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, BlockInsert);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = BlockInsert.__proto__ || Object.getPrototypeOf(BlockInsert)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      top: -1000,\n      left: -1000,\n      active: false,\n      closestRootNode: undefined\n    }, _this.componentDidMount = function () {\n      if (typeof window !== \"undefined\") {\n        window.addEventListener(\"mousemove\", _this.handleMouseMove);\n      }\n    }, _this.componentWillUnmount = function () {\n      if (_this.mouseMoveTimeout) clearTimeout(_this.mouseMoveTimeout);\n      if (typeof window !== \"undefined\") {\n        window.removeEventListener(\"mousemove\", _this.handleMouseMove);\n      }\n    }, _this.setInactive = function () {\n      _this.setState({ active: false });\n    }, _this.handleMouseMove = function (ev) {\n      var triggerPoint = _this.ref ? _this.ref.getBoundingClientRect().left + 300 : window.innerWidth;\n      var result = findClosestRootNode(_this.props.editor.value, ev);\n      var newState = _extends({}, _this.state);\n\n      newState.active = ev.clientX < triggerPoint;\n\n      if (result) {\n        newState.closestRootNode = result.node;\n\n        // do not show block menu when it's open, the paragraph isn't empty\n        // or the current node is an embed.\n        var hideToolbar = result.node.type !== \"paragraph\" || !!result.node.text.trim() || result.node.isVoid;\n\n        if (hideToolbar) {\n          newState.left = -1000;\n          newState.active = false;\n        } else {\n          newState.left = Math.round(result.bounds.left - 20);\n          newState.top = Math.round(result.bounds.top + window.scrollY);\n        }\n      }\n\n      if (_this.state.active) {\n        if (_this.mouseMoveTimeout) clearTimeout(_this.mouseMoveTimeout);\n        _this.mouseMoveTimeout = setTimeout(_this.setInactive, 2000);\n      }\n\n      if (!(0, _isEqual3.default)(newState, _this.state)) {\n        _this.setState(newState);\n      }\n    }, _this.handleClick = function (ev) {\n      ev.preventDefault();\n      ev.stopPropagation();\n\n      _this.setState({ active: false });\n\n      var editor = _this.props.editor;\n\n      // remove any existing toolbars in the document as a fail safe\n\n      editor.value.document.nodes.forEach(function (node) {\n        if (node.type === \"block-toolbar\") {\n          editor.setNodeByKey(node.key, {\n            type: \"paragraph\",\n            isVoid: false\n          });\n        }\n      });\n\n      var node = _this.state.closestRootNode;\n      if (!node) return;\n\n      // we're on an empty paragraph. just replace it with the block toolbar\n      if (!node.text.trim() && node.type === \"paragraph\") {\n        editor.setNodeByKey(node.key, {\n          type: \"block-toolbar\",\n          isVoid: true\n        });\n      }\n    }, _this.setRef = function (ref) {\n      _this.ref = ref;\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(BlockInsert, [{\n    key: \"render\",\n    value: function render() {\n      var theme = this.props.theme;\n\n      var style = { top: this.state.top + \"px\", left: this.state.left + \"px\" };\n\n      return React.createElement(\n        React.Fragment,\n        null,\n        React.createElement(\"span\", { ref: this.setRef }),\n        React.createElement(\n          _reactPortal.Portal,\n          null,\n          React.createElement(\n            Trigger,\n            { active: this.state.active, style: style },\n            React.createElement(_outlineIcons.PlusIcon, {\n              onClick: this.handleClick,\n              color: theme.blockToolbarTrigger\n            })\n          )\n        )\n      );\n    }\n  }]);\n\n  return BlockInsert;\n}(React.Component);\n\nvar Trigger = _styledComponents2.default.div.withConfig({\n  displayName: \"BlockInsert__Trigger\",\n  componentId: \"sc-9hcx4i-0\"\n})([\"position:absolute;z-index:\", \";opacity:0;background-color:\", \";transition:opacity 150ms cubic-bezier(0.175,0.885,0.32,1.275),transform 150ms cubic-bezier(0.175,0.885,0.32,1.275);line-height:0;margin-left:-10px;box-shadow:inset 0 0 0 2px \", \";border-radius:100%;transform:scale(0.9);cursor:pointer;&:hover{background-color:\", \";svg{fill:\", \";}}\", \";\"], function (props) {\n  return props.theme.zIndex + 99;\n}, function (props) {\n  return props.theme.background;\n}, function (props) {\n  return props.theme.blockToolbarTrigger;\n}, function (props) {\n  return props.theme.blockToolbarTrigger;\n}, function (props) {\n  return props.theme.blockToolbarTriggerIcon;\n}, function (_ref2) {\n  var active = _ref2.active;\n  return active && \"\\n    transform: scale(1);\\n    opacity: .9;\\n  \";\n});\n\nexports.default = (0, _styledComponents.withTheme)(BlockInsert);"]},"metadata":{},"sourceType":"script"}