{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.schema = exports.theme = undefined;\n\nvar _regenerator = require(\"babel-runtime/regenerator\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _class, _temp;\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _slate = require(\"slate\");\n\nvar _slateReact = require(\"slate-react\");\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nvar _theme = require(\"./theme\");\n\nvar _schema = require(\"./schema\");\n\nvar _schema2 = _interopRequireDefault(_schema);\n\nvar _getDataTransferFiles = require(\"./lib/getDataTransferFiles\");\n\nvar _getDataTransferFiles2 = _interopRequireDefault(_getDataTransferFiles);\n\nvar _isModKey = require(\"./lib/isModKey\");\n\nvar _isModKey2 = _interopRequireDefault(_isModKey);\n\nvar _Flex = require(\"./components/Flex\");\n\nvar _Flex2 = _interopRequireDefault(_Flex);\n\nvar _serializer = require(\"./serializer\");\n\nvar _serializer2 = _interopRequireDefault(_serializer);\n\nvar _plugins = require(\"./plugins\");\n\nvar _plugins2 = _interopRequireDefault(_plugins);\n\nvar _commands = require(\"./commands\");\n\nvar _commands2 = _interopRequireDefault(_commands);\n\nvar _queries = require(\"./queries\");\n\nvar _queries2 = _interopRequireDefault(_queries);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var gen = fn.apply(this, arguments);\n    return new Promise(function (resolve, reject) {\n      function step(key, arg) {\n        try {\n          var info = gen[key](arg);\n          var value = info.value;\n        } catch (error) {\n          reject(error);\n          return;\n        }\n\n        if (info.done) {\n          resolve(value);\n        } else {\n          return Promise.resolve(value).then(function (value) {\n            step(\"next\", value);\n          }, function (err) {\n            step(\"throw\", err);\n          });\n        }\n      }\n\n      return step(\"next\");\n    });\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar theme = exports.theme = _theme.light;\nvar schema = exports.schema = _schema2.default;\nvar defaultOptions = {};\nvar RichMarkdownEditor = (_temp = _class = function (_React$PureComponent) {\n  _inherits(RichMarkdownEditor, _React$PureComponent);\n\n  function RichMarkdownEditor(props) {\n    var _this2 = this;\n\n    _classCallCheck(this, RichMarkdownEditor);\n\n    var _this = _possibleConstructorReturn(this, (RichMarkdownEditor.__proto__ || Object.getPrototypeOf(RichMarkdownEditor)).call(this, props));\n\n    _this.prevSchema = null;\n    _this.schema = null;\n\n    _this.setEditorRef = function (ref) {\n      _this.editor = ref;\n    };\n\n    _this.value = function () {\n      // return Markdown.serialize(this.props.editorValue);\n      return _this.props.editorValue;\n    };\n\n    _this.handleChange = function (_ref) {\n      var value = _ref.value;\n\n      if (_this.props.onChange && !_this.props.readOnly) {\n        _this.props.onChange(value);\n      }\n    };\n\n    _this.handleDrop = function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regenerator2.default.mark(function _callee(ev) {\n        var files, i, _file;\n\n        return _regenerator2.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!_this.props.readOnly) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                if (_this.editor.props.uploadImage) {\n                  _context.next = 4;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 4:\n                if (!ev.isDefaultPrevented()) {\n                  _context.next = 6;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 6:\n                // otherwise we'll handle this\n                ev.preventDefault();\n                ev.stopPropagation();\n                files = (0, _getDataTransferFiles2.default)(ev);\n                i = 0;\n\n              case 10:\n                if (!(i < files.length)) {\n                  _context.next = 18;\n                  break;\n                }\n\n                _file = files[i];\n\n                if (!_file.type.startsWith(\"image/\")) {\n                  _context.next = 15;\n                  break;\n                }\n\n                _context.next = 15;\n                return _this.insertImageFile(_file);\n\n              case 15:\n                i++;\n                _context.next = 10;\n                break;\n\n              case 18:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, _this2);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.insertImageFile = function (file) {\n      _this.editor.insertImageFile(file);\n    };\n\n    _this.cancelEvent = function (ev) {\n      ev.preventDefault();\n    };\n\n    _this.handleKeyDown = function (ev, editor) {\n      var next = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};\n      if (_this.props.readOnly) return next();\n\n      switch (ev.key) {\n        case \"s\":\n          if ((0, _isModKey2.default)(ev)) return _this.onSave(ev);\n          break;\n\n        case \"Enter\":\n          if ((0, _isModKey2.default)(ev)) return _this.onSaveAndExit(ev);\n          break;\n\n        case \"Escape\":\n          if ((0, _isModKey2.default)(ev)) return _this.onCancel(ev);\n          break;\n\n        default:\n      }\n\n      return next();\n    };\n\n    _this.focusAtStart = function () {\n      var editor = _this.editor;\n      editor.moveToStartOfDocument().focus();\n    };\n\n    _this.focusAtEnd = function () {\n      var editor = _this.editor;\n      editor.moveToEndOfDocument().focus();\n    };\n\n    _this.getSchema = function () {\n      if (_this.prevSchema !== _this.props.schema) {\n        _this.schema = _extends({}, _schema2.default, _this.props.schema || {});\n        _this.prevSchema = _this.props.schema;\n      }\n\n      return _this.schema;\n    };\n\n    _this.render = function () {\n      var _this$props = _this.props,\n          readOnly = _this$props.readOnly,\n          pretitle = _this$props.pretitle,\n          placeholder = _this$props.placeholder,\n          onSave = _this$props.onSave,\n          onChange = _this$props.onChange,\n          onCancel = _this$props.onCancel,\n          uploadImage = _this$props.uploadImage,\n          onSearchLink = _this$props.onSearchLink,\n          onClickLink = _this$props.onClickLink,\n          onImageUploadStart = _this$props.onImageUploadStart,\n          onImageUploadStop = _this$props.onImageUploadStop,\n          onShowToast = _this$props.onShowToast,\n          className = _this$props.className,\n          style = _this$props.style,\n          dark = _this$props.dark,\n          defaultValue = _this$props.defaultValue,\n          autoFocus = _this$props.autoFocus,\n          plugins = _this$props.plugins,\n          rest = _objectWithoutProperties(_this$props, [\"readOnly\", \"pretitle\", \"placeholder\", \"onSave\", \"onChange\", \"onCancel\", \"uploadImage\", \"onSearchLink\", \"onClickLink\", \"onImageUploadStart\", \"onImageUploadStop\", \"onShowToast\", \"className\", \"style\", \"dark\", \"defaultValue\", \"autoFocus\", \"plugins\"]);\n\n      var theme = _this.props.theme || (dark ? _theme.dark : _theme.light);\n      var editorValue = _this.props.editorValue;\n\n      if (typeof _this.props.editorValue === \"string\") {\n        editorValue = _serializer2.default.deserialize(_this.props.editorValue);\n      }\n\n      return React.createElement(_Flex2.default, {\n        style: style,\n        className: className,\n        onDrop: _this.handleDrop,\n        onDragOver: _this.cancelEvent,\n        onDragEnter: _this.cancelEvent,\n        align: \"flex-start\",\n        justify: \"center\",\n        column: true,\n        auto: true\n      }, React.createElement(_styledComponents.ThemeProvider, {\n        theme: theme\n      }, React.createElement(StyledEditor, _extends({\n        ref: _this.setEditorRef,\n        plugins: _this.plugins,\n        value: editorValue,\n        commands: _commands2.default,\n        queries: _queries2.default,\n        placeholder: placeholder,\n        schema: _this.getSchema(),\n        onKeyDown: _this.handleKeyDown,\n        onChange: _this.handleChange,\n        onSave: onSave,\n        onSearchLink: onSearchLink,\n        onClickLink: onClickLink,\n        onImageUploadStart: onImageUploadStart,\n        onImageUploadStop: onImageUploadStop,\n        onShowToast: onShowToast,\n        readOnly: readOnly,\n        spellCheck: !readOnly,\n        uploadImage: uploadImage,\n        pretitle: pretitle,\n        options: defaultOptions\n      }, rest))));\n    };\n\n    var builtInPlugins = (0, _plugins2.default)({\n      placeholder: props.placeholder,\n      getLinkComponent: props.getLinkComponent\n    }); // in Slate plugins earlier in the stack can opt not to continue\n    // to later ones. By adding overrides first we give more control\n\n    _this.plugins = [].concat(_toConsumableArray(props.plugins), _toConsumableArray(builtInPlugins));\n    return _this;\n  }\n\n  _createClass(RichMarkdownEditor, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.scrollToAnchor();\n      if (this.props.readOnly) return;\n\n      if (typeof window !== \"undefined\") {\n        window.addEventListener(\"keydown\", this.handleKeyDown);\n      }\n\n      if (this.props.autoFocus) {\n        this.focusAtEnd();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.readOnly && !this.props.readOnly && this.props.autoFocus) {\n        this.focusAtEnd();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (typeof window !== \"undefined\") {\n        window.removeEventListener(\"keydown\", this.handleKeyDown);\n      }\n    }\n  }, {\n    key: \"scrollToAnchor\",\n    value: function scrollToAnchor() {\n      var hash = window.location.hash;\n      if (!hash) return;\n\n      try {\n        var element = document.querySelector(hash);\n        if (element) element.scrollIntoView({\n          behavior: \"smooth\"\n        });\n      } catch (err) {\n        // querySelector will throw an error if the hash begins with a number\n        // or contains a period. This is protected against now by safeSlugify\n        // however previous links may be in the wild.\n        console.warn(\"Attempted to scroll to invalid hash\", err);\n      }\n    }\n  }, {\n    key: \"onSave\",\n    value: function onSave(ev) {\n      var onSave = this.props.onSave;\n\n      if (onSave) {\n        ev.preventDefault();\n        ev.stopPropagation();\n        onSave({\n          done: false\n        });\n      }\n    }\n  }, {\n    key: \"onSaveAndExit\",\n    value: function onSaveAndExit(ev) {\n      var onSave = this.props.onSave;\n\n      if (onSave) {\n        ev.preventDefault();\n        ev.stopPropagation();\n        onSave({\n          done: true\n        });\n      }\n    }\n  }, {\n    key: \"onCancel\",\n    value: function onCancel(ev) {\n      var onCancel = this.props.onCancel;\n\n      if (onCancel) {\n        ev.preventDefault();\n        ev.stopPropagation();\n        onCancel();\n      }\n    }\n  }]);\n\n  return RichMarkdownEditor;\n}(React.PureComponent), _class.defaultProps = {\n  editorValue: \"\",\n  placeholder: \"Write something nice…\",\n  onImageUploadStart: function onImageUploadStart() {},\n  onImageUploadStop: function onImageUploadStop() {},\n  plugins: [],\n  tooltip: \"span\"\n}, _temp);\nvar StyledEditor = (0, _styledComponents2.default)(_slateReact.Editor).withConfig({\n  displayName: \"src__StyledEditor\",\n  componentId: \"sc-1d306fq-0\"\n})([\"color:\", \";background:\", \";font-family:\", \";font-weight:\", \";font-size:1em;line-height:1.7em;width:100%;h1,h2,h3,h4,h5,h6{font-weight:500;}ul,ol{margin:0 0.1em;padding-left:1em;ul,ol{margin:0.1em;}}p{position:relative;margin:0;}a{color:\", \";}a:hover{text-decoration:\", \";}li p{display:inline;margin:0;}.todoList{list-style:none;padding-left:0;.todoList{padding-left:1em;}}.todo{span:last-child:focus{outline:none;}}blockquote{border-left:3px solid \", \";margin:0;padding-left:10px;font-style:italic;}b,strong{font-weight:600;}\"], function (props) {\n  return props.theme.text;\n}, function (props) {\n  return props.theme.background;\n}, function (props) {\n  return props.theme.fontFamily;\n}, function (props) {\n  return props.theme.fontWeight;\n}, function (props) {\n  return props.theme.link;\n}, function (props) {\n  return props.readOnly ? \"underline\" : \"none\";\n}, function (props) {\n  return props.theme.quote;\n});\nexports.default = RichMarkdownEditor;","map":{"version":3,"sources":["C:/Users/ayomi/source/repos/Idea-Creator/Idea-Creator/MindOverMapper_Movim/MindOverMapper_Movim/ClientApp/node_modules/awehook-rich-markdown-editor/lib/index.js"],"names":["Object","defineProperty","exports","value","schema","theme","undefined","_regenerator","require","_regenerator2","_interopRequireDefault","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_class","_temp","_react","React","_interopRequireWildcard","_slate","_slateReact","_styledComponents","_styledComponents2","_theme","_schema","_schema2","_getDataTransferFiles","_getDataTransferFiles2","_isModKey","_isModKey2","_Flex","_Flex2","_serializer","_serializer2","_plugins","_plugins2","_commands","_commands2","_queries","_queries2","obj","__esModule","newObj","default","_toConsumableArray","arr","Array","isArray","arr2","from","_objectWithoutProperties","keys","indexOf","_asyncToGenerator","fn","gen","apply","Promise","resolve","reject","step","arg","info","error","done","then","err","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","light","defaultOptions","RichMarkdownEditor","_React$PureComponent","_this2","_this","getPrototypeOf","prevSchema","setEditorRef","ref","editor","editorValue","handleChange","_ref","onChange","readOnly","handleDrop","_ref2","mark","_callee","ev","files","_file","wrap","_callee$","_context","prev","next","abrupt","uploadImage","isDefaultPrevented","preventDefault","stopPropagation","type","startsWith","insertImageFile","stop","_x","file","cancelEvent","handleKeyDown","onSave","onSaveAndExit","onCancel","focusAtStart","moveToStartOfDocument","focus","focusAtEnd","moveToEndOfDocument","getSchema","render","_this$props","pretitle","placeholder","onSearchLink","onClickLink","onImageUploadStart","onImageUploadStop","onShowToast","className","style","dark","defaultValue","autoFocus","plugins","rest","deserialize","createElement","onDrop","onDragOver","onDragEnter","align","justify","column","auto","ThemeProvider","StyledEditor","commands","queries","onKeyDown","spellCheck","options","builtInPlugins","getLinkComponent","concat","componentDidMount","scrollToAnchor","window","addEventListener","componentDidUpdate","prevProps","componentWillUnmount","removeEventListener","hash","location","element","document","querySelector","scrollIntoView","behavior","console","warn","PureComponent","defaultProps","tooltip","Editor","withConfig","displayName","componentId","text","background","fontFamily","fontWeight","link","quote"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.schema = exports.theme = undefined;\n\nvar _regenerator = require(\"babel-runtime/regenerator\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _class, _temp;\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nvar _slate = require(\"slate\");\n\nvar _slateReact = require(\"slate-react\");\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nvar _theme = require(\"./theme\");\n\nvar _schema = require(\"./schema\");\n\nvar _schema2 = _interopRequireDefault(_schema);\n\nvar _getDataTransferFiles = require(\"./lib/getDataTransferFiles\");\n\nvar _getDataTransferFiles2 = _interopRequireDefault(_getDataTransferFiles);\n\nvar _isModKey = require(\"./lib/isModKey\");\n\nvar _isModKey2 = _interopRequireDefault(_isModKey);\n\nvar _Flex = require(\"./components/Flex\");\n\nvar _Flex2 = _interopRequireDefault(_Flex);\n\nvar _serializer = require(\"./serializer\");\n\nvar _serializer2 = _interopRequireDefault(_serializer);\n\nvar _plugins = require(\"./plugins\");\n\nvar _plugins2 = _interopRequireDefault(_plugins);\n\nvar _commands = require(\"./commands\");\n\nvar _commands2 = _interopRequireDefault(_commands);\n\nvar _queries = require(\"./queries\");\n\nvar _queries2 = _interopRequireDefault(_queries);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar theme = exports.theme = _theme.light;\nvar schema = exports.schema = _schema2.default;\n\nvar defaultOptions = {};\n\nvar RichMarkdownEditor = (_temp = _class = function (_React$PureComponent) {\n  _inherits(RichMarkdownEditor, _React$PureComponent);\n\n  function RichMarkdownEditor(props) {\n    var _this2 = this;\n\n    _classCallCheck(this, RichMarkdownEditor);\n\n    var _this = _possibleConstructorReturn(this, (RichMarkdownEditor.__proto__ || Object.getPrototypeOf(RichMarkdownEditor)).call(this, props));\n\n    _this.prevSchema = null;\n    _this.schema = null;\n\n    _this.setEditorRef = function (ref) {\n      _this.editor = ref;\n    };\n\n    _this.value = function () {\n      // return Markdown.serialize(this.props.editorValue);\n      return _this.props.editorValue;\n    };\n\n    _this.handleChange = function (_ref) {\n      var value = _ref.value;\n\n      if (_this.props.onChange && !_this.props.readOnly) {\n        _this.props.onChange(value);\n      }\n    };\n\n    _this.handleDrop = function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regenerator2.default.mark(function _callee(ev) {\n        var files, i, _file;\n\n        return _regenerator2.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!_this.props.readOnly) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                if (_this.editor.props.uploadImage) {\n                  _context.next = 4;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 4:\n                if (!ev.isDefaultPrevented()) {\n                  _context.next = 6;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 6:\n\n                // otherwise we'll handle this\n                ev.preventDefault();\n                ev.stopPropagation();\n\n                files = (0, _getDataTransferFiles2.default)(ev);\n                i = 0;\n\n              case 10:\n                if (!(i < files.length)) {\n                  _context.next = 18;\n                  break;\n                }\n\n                _file = files[i];\n\n                if (!_file.type.startsWith(\"image/\")) {\n                  _context.next = 15;\n                  break;\n                }\n\n                _context.next = 15;\n                return _this.insertImageFile(_file);\n\n              case 15:\n                i++;\n                _context.next = 10;\n                break;\n\n              case 18:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, _this2);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.insertImageFile = function (file) {\n      _this.editor.insertImageFile(file);\n    };\n\n    _this.cancelEvent = function (ev) {\n      ev.preventDefault();\n    };\n\n    _this.handleKeyDown = function (ev, editor) {\n      var next = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};\n\n      if (_this.props.readOnly) return next();\n\n      switch (ev.key) {\n        case \"s\":\n          if ((0, _isModKey2.default)(ev)) return _this.onSave(ev);\n          break;\n        case \"Enter\":\n          if ((0, _isModKey2.default)(ev)) return _this.onSaveAndExit(ev);\n          break;\n        case \"Escape\":\n          if ((0, _isModKey2.default)(ev)) return _this.onCancel(ev);\n          break;\n        default:\n      }\n\n      return next();\n    };\n\n    _this.focusAtStart = function () {\n      var editor = _this.editor;\n\n      editor.moveToStartOfDocument().focus();\n    };\n\n    _this.focusAtEnd = function () {\n      var editor = _this.editor;\n\n      editor.moveToEndOfDocument().focus();\n    };\n\n    _this.getSchema = function () {\n      if (_this.prevSchema !== _this.props.schema) {\n        _this.schema = _extends({}, _schema2.default, _this.props.schema || {});\n        _this.prevSchema = _this.props.schema;\n      }\n      return _this.schema;\n    };\n\n    _this.render = function () {\n      var _this$props = _this.props,\n          readOnly = _this$props.readOnly,\n          pretitle = _this$props.pretitle,\n          placeholder = _this$props.placeholder,\n          onSave = _this$props.onSave,\n          onChange = _this$props.onChange,\n          onCancel = _this$props.onCancel,\n          uploadImage = _this$props.uploadImage,\n          onSearchLink = _this$props.onSearchLink,\n          onClickLink = _this$props.onClickLink,\n          onImageUploadStart = _this$props.onImageUploadStart,\n          onImageUploadStop = _this$props.onImageUploadStop,\n          onShowToast = _this$props.onShowToast,\n          className = _this$props.className,\n          style = _this$props.style,\n          dark = _this$props.dark,\n          defaultValue = _this$props.defaultValue,\n          autoFocus = _this$props.autoFocus,\n          plugins = _this$props.plugins,\n          rest = _objectWithoutProperties(_this$props, [\"readOnly\", \"pretitle\", \"placeholder\", \"onSave\", \"onChange\", \"onCancel\", \"uploadImage\", \"onSearchLink\", \"onClickLink\", \"onImageUploadStart\", \"onImageUploadStop\", \"onShowToast\", \"className\", \"style\", \"dark\", \"defaultValue\", \"autoFocus\", \"plugins\"]);\n\n      var theme = _this.props.theme || (dark ? _theme.dark : _theme.light);\n      var editorValue = _this.props.editorValue;\n      if (typeof _this.props.editorValue === \"string\") {\n        editorValue = _serializer2.default.deserialize(_this.props.editorValue);\n      }\n      return React.createElement(\n        _Flex2.default,\n        {\n          style: style,\n          className: className,\n          onDrop: _this.handleDrop,\n          onDragOver: _this.cancelEvent,\n          onDragEnter: _this.cancelEvent,\n          align: \"flex-start\",\n          justify: \"center\",\n          column: true,\n          auto: true\n        },\n        React.createElement(\n          _styledComponents.ThemeProvider,\n          { theme: theme },\n          React.createElement(StyledEditor, _extends({\n            ref: _this.setEditorRef,\n            plugins: _this.plugins,\n            value: editorValue,\n            commands: _commands2.default,\n            queries: _queries2.default,\n            placeholder: placeholder,\n            schema: _this.getSchema(),\n            onKeyDown: _this.handleKeyDown,\n            onChange: _this.handleChange,\n            onSave: onSave,\n            onSearchLink: onSearchLink,\n            onClickLink: onClickLink,\n            onImageUploadStart: onImageUploadStart,\n            onImageUploadStop: onImageUploadStop,\n            onShowToast: onShowToast,\n            readOnly: readOnly,\n            spellCheck: !readOnly,\n            uploadImage: uploadImage,\n            pretitle: pretitle,\n            options: defaultOptions\n          }, rest))\n        )\n      );\n    };\n\n    var builtInPlugins = (0, _plugins2.default)({\n      placeholder: props.placeholder,\n      getLinkComponent: props.getLinkComponent\n    });\n\n    // in Slate plugins earlier in the stack can opt not to continue\n    // to later ones. By adding overrides first we give more control\n    _this.plugins = [].concat(_toConsumableArray(props.plugins), _toConsumableArray(builtInPlugins));\n    return _this;\n  }\n\n  _createClass(RichMarkdownEditor, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.scrollToAnchor();\n\n      if (this.props.readOnly) return;\n      if (typeof window !== \"undefined\") {\n        window.addEventListener(\"keydown\", this.handleKeyDown);\n      }\n\n      if (this.props.autoFocus) {\n        this.focusAtEnd();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.readOnly && !this.props.readOnly && this.props.autoFocus) {\n        this.focusAtEnd();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (typeof window !== \"undefined\") {\n        window.removeEventListener(\"keydown\", this.handleKeyDown);\n      }\n    }\n  }, {\n    key: \"scrollToAnchor\",\n    value: function scrollToAnchor() {\n      var hash = window.location.hash;\n\n      if (!hash) return;\n\n      try {\n        var element = document.querySelector(hash);\n        if (element) element.scrollIntoView({ behavior: \"smooth\" });\n      } catch (err) {\n        // querySelector will throw an error if the hash begins with a number\n        // or contains a period. This is protected against now by safeSlugify\n        // however previous links may be in the wild.\n        console.warn(\"Attempted to scroll to invalid hash\", err);\n      }\n    }\n  }, {\n    key: \"onSave\",\n    value: function onSave(ev) {\n      var onSave = this.props.onSave;\n\n      if (onSave) {\n        ev.preventDefault();\n        ev.stopPropagation();\n        onSave({ done: false });\n      }\n    }\n  }, {\n    key: \"onSaveAndExit\",\n    value: function onSaveAndExit(ev) {\n      var onSave = this.props.onSave;\n\n      if (onSave) {\n        ev.preventDefault();\n        ev.stopPropagation();\n        onSave({ done: true });\n      }\n    }\n  }, {\n    key: \"onCancel\",\n    value: function onCancel(ev) {\n      var onCancel = this.props.onCancel;\n\n      if (onCancel) {\n        ev.preventDefault();\n        ev.stopPropagation();\n        onCancel();\n      }\n    }\n  }]);\n\n  return RichMarkdownEditor;\n}(React.PureComponent), _class.defaultProps = {\n  editorValue: \"\",\n  placeholder: \"Write something nice…\",\n  onImageUploadStart: function onImageUploadStart() {},\n  onImageUploadStop: function onImageUploadStop() {},\n  plugins: [],\n  tooltip: \"span\"\n}, _temp);\n\n\nvar StyledEditor = (0, _styledComponents2.default)(_slateReact.Editor).withConfig({\n  displayName: \"src__StyledEditor\",\n  componentId: \"sc-1d306fq-0\"\n})([\"color:\", \";background:\", \";font-family:\", \";font-weight:\", \";font-size:1em;line-height:1.7em;width:100%;h1,h2,h3,h4,h5,h6{font-weight:500;}ul,ol{margin:0 0.1em;padding-left:1em;ul,ol{margin:0.1em;}}p{position:relative;margin:0;}a{color:\", \";}a:hover{text-decoration:\", \";}li p{display:inline;margin:0;}.todoList{list-style:none;padding-left:0;.todoList{padding-left:1em;}}.todo{span:last-child:focus{outline:none;}}blockquote{border-left:3px solid \", \";margin:0;padding-left:10px;font-style:italic;}b,strong{font-weight:600;}\"], function (props) {\n  return props.theme.text;\n}, function (props) {\n  return props.theme.background;\n}, function (props) {\n  return props.theme.fontFamily;\n}, function (props) {\n  return props.theme.fontWeight;\n}, function (props) {\n  return props.theme.link;\n}, function (props) {\n  return props.readOnly ? \"underline\" : \"none\";\n}, function (props) {\n  return props.theme.quote;\n});\n\nexports.default = RichMarkdownEditor;"]},"metadata":{},"sourceType":"script"}