{"ast":null,"code":"'use strict';\n\nvar Slate = require('slate');\n\nvar focusAtEnd = require('./focusAtEnd');\n/**\r\n * Slate plugin to ensure a trailing block.\r\n * @param {Object} [opts] Options for the plugin\r\n * @param {Function} [opts.match] Match last block\r\n * @param {String} [opts.type='paragraph'] The type of the trailing block to insert\r\n * @return {Object}\r\n */\n\n\nfunction TrailingBlock(opts) {\n  opts = opts || {};\n  opts.type = opts.type || 'paragraph';\n\n  opts.match = opts.match || function (node) {\n    return node.type === opts.type;\n  };\n\n  return {\n    onChange: function onChange(editor, next) {\n      var document = editor.value.document;\n      var lastNode = document.nodes.last();\n\n      if (lastNode && opts.match(lastNode)) {\n        return next();\n      }\n\n      var lastIndex = document.nodes.size;\n      var block = Slate.Block.create({\n        type: opts.type,\n        nodes: [Slate.Text.create()]\n      });\n      editor.insertNodeByKey(document.key, lastIndex, block);\n    },\n    changes: {\n      focusAtEnd: focusAtEnd\n    }\n  };\n}\n\nmodule.exports = TrailingBlock;","map":null,"metadata":{},"sourceType":"script"}